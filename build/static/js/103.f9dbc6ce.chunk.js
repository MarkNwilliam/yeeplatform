"use strict";(self.webpackChunkyeeplatform=self.webpackChunkyeeplatform||[]).push([[103],{70360:(e,a,o)=>{o.d(a,{X:()=>t});const t=["Algeria","Angola","Benin","Botswana","Burkina Faso","Burundi","Cabo Verde","Cameroon","Central African Republic","Chad","Comoros","Democratic Republic of the Congo","Republic of the Congo","Cote d'Ivoire","Djibouti","Egypt","Equatorial Guinea","Eritrea","Eswatini","Ethiopia","Gabon","Gambia","Ghana","Guinea","Guinea-Bissau","Kenya","Lesotho","Liberia","Libya","Madagascar","Malawi","Mali","Mauritania","Mauritius","Morocco","Mozambique","Namibia","Niger","Nigeria","Rwanda","Sao Tome and Principe","Senegal","Seychelles","Sierra Leone","Somalia","South Africa","South Sudan","Sudan","Tanzania","Togo","Tunisia","Uganda","Zambia","Zimbabwe"]},31103:(e,a,o)=>{o.r(a),o.d(a,{default:()=>g});var t=o(65043),r=o(30064),n=o.n(r),i=o(17392),s=o(11906),l=o(59662),c=o(70579);const d=(0,l.A)((0,c.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack");var u=o(73216),m=o(24858),h=(o(31425),o(2253)),p=o(77154),f=o(70360);const g=()=>{var e,a,o,r,l,g;const[b,w]=(0,t.useState)({}),[x,k]=(0,t.useState)(!1),y=(0,u.Zp)(),{register:j,handleSubmit:v,setValue:L}=(0,m.mN)({defaultValues:{username:b.username,phone:b.phone,country:b.country,age:b.age,preferredReadingMode:b.preferredReadingMode,"socialLinks.twitter":null===(e=b.socialLinks)||void 0===e?void 0:e.twitter,"socialLinks.instagram":null===(a=b.socialLinks)||void 0===a?void 0:a.instagram,"socialLinks.facebook":null===(o=b.socialLinks)||void 0===o?void 0:o.facebook}}),C=h.j2.currentUser.uid;(0,t.useEffect)((()=>{const e=h.j2.currentUser.uid;p.A.get("https://yeeplatformbackend.azurewebsites.net/userDetails/".concat(e)).then((a=>{const o=a.data;w(o),k(o.providerData&&"google.com"===o.providerData[0].providerId);for(let e in o)Object.prototype.hasOwnProperty.call(o,e)&&L(e,o[e]);o.socialLinks&&(L("socialLinks.twitter",o.socialLinks.twitter),L("socialLinks.instagram",o.socialLinks.instagram),L("socialLinks.facebook",o.socialLinks.facebook)),console.log(o),(0,h.$s)(h.zS,"AccountPage","UserDetailsFetched",{userId:e})})).catch((e=>{console.error("Error fetching user data:",e)}))}),[]);return(0,c.jsxs)("div",{className:"bg-gray-100 min-h-screen p-4",children:[(0,c.jsxs)("header",{className:"flex items-center border-b border-gray-300 mb-6",children:[(0,c.jsx)(i.A,{onClick:()=>y(-1),className:"mr-2",children:(0,c.jsx)(d,{})}),(0,c.jsx)("h1",{className:"text-xl font-semibold text-yellow-500 text-center flex-grow",children:"Account Settings"})]}),(0,c.jsxs)("div",{className:"bg-white shadow-md rounded p-6 mx-auto max-w-xl",children:[(0,c.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Personal Details"}),(0,c.jsxs)("form",{onSubmit:v((e=>{const a=h.j2.currentUser.uid;n().fire({title:"Saving Changes...",onBeforeOpen:()=>{n().showLoading()},allowOutsideClick:!1}),p.A.put("https://yeeplatformbackend.azurewebsites.net/updateaccountinfo/".concat(a),e).then((e=>{console.log("User data updated:",e.data),n().fire({icon:"success",title:"Success!",text:"Your data has been updated.",confirmButtonColor:"#3085d6"})})).catch((e=>{console.error("Error updating user data:",e),n().fire({icon:"error",title:"Oops...",text:"Something went wrong. Please try again.",confirmButtonColor:"#d33"})}))})),children:[(0,c.jsx)("input",{...j("username",{required:!0,maxLength:20}),className:"w-full p-2 mb-4 border rounded",placeholder:"Username",defaultValue:b.username}),!x&&(0,c.jsx)("input",{...j("email"),className:"w-full p-2 mb-4 border rounded",placeholder:"Email",defaultValue:b.email,disabled:!0}),(0,c.jsx)("input",{...j("phone",{pattern:/^[0-9]{10}$/}),className:"w-full p-2 mb-4 border rounded",placeholder:"Phone Number",defaultValue:b.phone}),(0,c.jsx)("select",{...j("country"),className:"w-full p-2 mb-4 border rounded",defaultValue:b.country,children:f.X.map((e=>(0,c.jsx)("option",{value:e,children:e},e)))}),(0,c.jsx)("input",{...j("age",{min:0,max:150}),className:"w-full p-2 mb-4 border rounded",placeholder:"Age",defaultValue:b.age}),(0,c.jsxs)("select",{...j("preferredReadingMode"),className:"w-full p-2 mb-4 border rounded",defaultValue:b.preferredReadingMode,children:[(0,c.jsx)("option",{value:"LTR",children:"Left to Right"}),(0,c.jsx)("option",{value:"RTL",children:"Right to Left"})]}),(0,c.jsx)("h2",{className:"text-lg font-medium mt-4 mb-4",children:"Social Links"}),(0,c.jsx)("input",{...j("socialLinks.twitter"),className:"w-full p-2 mb-4 border rounded",placeholder:"Twitter",defaultValue:null===(r=b.socialLinks)||void 0===r?void 0:r.twitter}),(0,c.jsx)("input",{...j("socialLinks.instagram"),className:"w-full p-2 mb-4 border rounded",placeholder:"Instagram",defaultValue:null===(l=b.socialLinks)||void 0===l?void 0:l.instagram}),(0,c.jsx)("input",{...j("socialLinks.facebook"),className:"w-full p-2 mb-4 border rounded",placeholder:"Facebook",defaultValue:null===(g=b.socialLinks)||void 0===g?void 0:g.facebook}),(0,c.jsxs)("div",{className:"flex justify-between gap-4 mt-4",children:[(0,c.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Save Changes"}),(0,c.jsx)("button",{onClick:async()=>{try{n().fire({title:"Becoming an Author...",onBeforeOpen:()=>{n().showLoading()},allowOutsideClick:!1});const e={isAuthor:!0},a=await p.A.put("https://yeeplatformbackend.azurewebsites.net/becomeAuthor/".concat(C),e);console.log(a.data),n().fire({icon:"success",title:"Congratulations!",text:"You have successfully become an author.",confirmButtonColor:"#3085d6"}).then((()=>{window.location.href="/dashboard"}))}catch(e){console.error("Error:",e),n().fire({icon:"error",title:"Oops...",text:"Something went wrong. Please try again.",confirmButtonColor:"#d33"})}},className:"bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded shadow-md transition duration-300",children:"Become an Author"}),(0,c.jsx)(s.A,{variant:"outlined",color:"error",onClick:async()=>{try{await p.A.delete("https://yeeplatformbackend.azurewebsites.net/deleteaccount/".concat(C)),await h.j2.currentUser.delete(),n().fire({icon:"success",title:"Account Deleted",text:"Your account has been deleted.",confirmButtonColor:"#3085d6"}).then((()=>{window.location.href="/login"}))}catch(e){console.error("Error deleting account:",e),n().fire({icon:"error",title:"Oops...",text:"Something went wrong. Please try again.",confirmButtonColor:"#d33"})}},children:"Delete Account"}),!x&&(0,c.jsx)("button",{onClick:()=>(async e=>{try{await h.j2.currentUser.verifyBeforeUpdateEmail(e),n().fire({icon:"success",title:"Email Change Initiated",text:"A verification email has been sent to ".concat(e,". Please verify your new email address."),confirmButtonColor:"#3085d6"})}catch(a){console.error("Error initiating email change:",a),n().fire({icon:"error",title:"Oops...",text:"Something went wrong. Please try again.",confirmButtonColor:"#d33"})}})("newEmail@example.com"),className:"bg-yellow-500 hover:bg-yellow-600 text-white py-2 px-4 rounded shadow-md transition duration-300",children:"Change Email"})]})]})]})]})}},31425:()=>{}}]);
//# sourceMappingURL=103.f9dbc6ce.chunk.js.map