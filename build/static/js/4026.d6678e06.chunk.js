"use strict";(self.webpackChunkyeeplatform=self.webpackChunkyeeplatform||[]).push([[4026],{97949:(e,t,o)=>{o.d(t,{A:()=>i});o(65043);var s=o(519),n=o(70579);const i=e=>{let{shareUrl:t,selectedText:o}=e;const i='Check out this quote: "'.concat(o,'" from @YeePlatform! ').concat("https://www.yeeplatform.com"," #").concat("YeePlatform");return(0,n.jsxs)("div",{className:"share-box w-full max-w-md mx-auto p-4",children:[(0,n.jsxs)("div",{className:"share-header mb-4",children:[(0,n.jsx)("img",{src:"https://assets-hfbubwfaacbch3e0.z02.azurefd.net/assets/images/Y.webp",alt:"YeePlatform Logo",className:"logo w-12 h-auto"}),(0,n.jsx)("span",{className:"share-title text-lg",children:"Share this quote with friends:"})]}),(0,n.jsxs)("div",{className:"share-icons flex justify-center",children:[(0,n.jsx)(s.uI,{title:"Test",url:t,quote:i,children:(0,n.jsx)(s.ik,{size:32,round:!0})}),(0,n.jsx)(s.r6,{url:t,title:i,children:(0,n.jsx)(s.Fi,{size:32,round:!0})}),(0,n.jsx)(s.wk,{url:t,title:i,children:(0,n.jsx)(s._z,{size:32,round:!0})}),(0,n.jsx)(s.Kz,{url:t,title:i,children:(0,n.jsx)(s.Y4,{size:32,round:!0})}),(0,n.jsx)(s.Ot,{url:t,subject:"Check out this quote",body:i,children:(0,n.jsx)(s.aZ,{size:32,round:!0})})]})]})}},84026:(e,t,o)=>{o.r(t),o.d(t,{default:()=>S});var s=o(65043),n=o(73216),i=o(73237),a=o(64980),r=o(86691),d=o(98225),l=o(46749),c=o(56409),p=(o(89709),o(91148),o(85369)),x=(o(49938),o(30064)),h=o.n(x),u=o(41591),g=(o(97949),o(48698),o(8606)),m=o(39085),j=o(68016),f=o(81637),y=o(85865),v=o(96446),w=o(67254),b=o(70579);const S=function(){const{id:e}=(0,n.g)(),[t,o]=(0,s.useState)(!1),[x,S]=(0,s.useState)(null),[k,C]=(0,s.useState)(null),[I,P]=(0,s.useState)([]),[M,z]=(0,s.useState)(0),{speak:O,cancel:_}=(0,g.o3)(),[N,T]=(0,s.useState)(!1),[F,D]=(0,s.useState)(""),[L,Y]=(0,s.useState)(!1),[A,E]=(0,s.useState)(1),[B,V]=(0,s.useState)(!1),J=()=>{V(!0)},R=()=>{V(!1)},q=(0,n.Zp)(),U=(0,r.A)("(max-width:626px)"),W=(0,r.A)("(max-width:400px)"),Z=U?.8:1,G=W?"wrap":"nowrap";function K(e){return(0,b.jsxs)(v.A,{sx:{position:"relative",display:"inline-flex"},children:[(0,b.jsx)(f.A,{variant:"determinate",...e}),(0,b.jsx)(v.A,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,b.jsx)(y.A,{variant:"caption",component:"div",color:"text.secondary",children:"".concat(Math.round(e.value),"%")})})]})}(0,s.useEffect)((()=>{(async()=>{o(!0);try{const t=await fetch("https://yeeplatformbackend.azurewebsites.net/getChapter/".concat(e),{cache:"force-cache"});if(!t.ok)return void console.error("Response not OK:",t);const o=await t.json();C(o),S(null===o||void 0===o?void 0:o.doc_location)}catch(t){console.error("Error fetching eBook content:",t.message)}finally{o(!1)}})()}),[e]);const H=async()=>{if(!t&&k)try{if(N)_(),T(!1);else{ee();window.speechSynthesis.getVoices();const e=await(async()=>{const e=await(0,l.getDocument)(x).promise,t=await e.getPage(A+1);return(await t.getTextContent()).items.map((e=>e.str)).join(" ")})();O({text:e,rate:.9}),D(e),h().close(),te(),T(!0)}}catch(e){h().close(),console.error("Error extracting page text:",e)}},Q=(0,c.scrollModePlugin)(),{SwitchScrollModeButton:X}=Q,$=(0,a.defaultLayoutPlugin)({sidebarTabs:e=>[e[0],e[1]],renderToolbar:e=>(0,b.jsx)(e,{children:e=>{const{CurrentPageInput:t,SwitchTheme:o,EnterFullScreen:s,GoToNextPage:n,GoToPreviousPage:a,NumberOfPages:r,SwitchScrollModeMenuItem:d,ShowSearchPopover:l,SwitchScrollMode:c,Zoom:x,ZoomIn:h,ZoomOut:u}=e;return(0,b.jsxs)("div",{style:{alignItems:"center",display:"flex",flexWrap:{defaultWrap:G},justifyContent:"space-between",width:"100%",height:"auto",backgroundColor:"#ffde5a",padding:"10px"},children:[(0,b.jsx)("div",{style:{padding:"0px 2px"},children:(0,b.jsx)("button",{onClick:()=>q("/chapters"),children:(0,b.jsx)(p.QVr,{})})}),(0,b.jsx)("div",{style:{padding:"0px 2px"},children:(0,b.jsx)(l,{})}),(0,b.jsx)("div",{style:{padding:"0px 2px"},children:(0,b.jsx)(u,{})}),(0,b.jsx)("div",{style:{padding:"0px 2px"},children:(0,b.jsx)(x,{})}),(0,b.jsx)("div",{style:{padding:"0px 2px"},children:(0,b.jsx)(h,{})}),(0,b.jsx)("div",{style:{padding:"0px 2px",marginLeft:"auto"},children:(0,b.jsx)(a,{})}),(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"0px 2px"},children:[(0,b.jsx)(t,{})," / ",(0,b.jsx)(r,{})]}),(0,b.jsx)("div",{style:{padding:"0px 2px"},children:(0,b.jsx)(n,{})}),(0,b.jsx)("div",{style:{padding:"0px 2px"},children:(0,b.jsx)("button",{onClick:H,children:(0,b.jsx)(p.gSK,{})})}),!U&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{padding:"0px 2px",marginLeft:"auto"},children:(0,b.jsx)(s,{})}),(0,b.jsx)("div",{style:{padding:"0px 2px",marginLeft:"auto"},children:(0,b.jsx)(o,{})}),(0,b.jsx)("div",{style:{padding:"0px 2px"},children:(0,b.jsx)(X,{mode:i.ScrollMode.Vertical})}),(0,b.jsx)("div",{style:{padding:"0px 2px"},children:(0,b.jsx)(X,{mode:i.ScrollMode.Horizontal})}),(0,b.jsx)("div",{style:{padding:"0px 2px"},children:(0,b.jsx)(X,{mode:i.ScrollMode.Wrapped})}),(0,b.jsx)("div",{style:{padding:"0px 2px"},children:(0,b.jsx)(X,{mode:i.ScrollMode.Page})})]}),U&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.A,{onClick:J,children:"Options"}),(0,b.jsxs)(m.Ay,{anchor:"right",open:B,onClose:R,children:[(0,b.jsx)("div",{style:{padding:"0px 2px",marginLeft:"auto"},children:(0,b.jsx)(s,{})}),(0,b.jsx)("div",{style:{padding:"0px 2px",marginLeft:"auto"},children:(0,b.jsx)(o,{})}),(0,b.jsx)("div",{style:{padding:"0px 2px"},children:(0,b.jsx)(X,{mode:i.ScrollMode.Vertical})}),(0,b.jsx)("div",{style:{padding:"0px 2px"},children:(0,b.jsx)(X,{mode:i.ScrollMode.Horizontal})}),(0,b.jsx)("div",{style:{padding:"0px 2px"},children:(0,b.jsx)(X,{mode:i.ScrollMode.Wrapped})}),(0,b.jsx)("div",{style:{padding:"0px 2px"},children:(0,b.jsx)(X,{mode:i.ScrollMode.Page})})]})]})]})}})}),ee=()=>{h().fire({title:"Loading",showClass:{popup:"\n            animate__animated\n            animate__fadeInUp\n            animate__faster\n          "},hideClass:{popup:"\n            animate__animated\n            animate__fadeOutDown\n            animate__faster\n          "},html:"Processing your request...",allowOutsideClick:!1,showConfirmButton:!1,onBeforeOpen:()=>{h().showLoading()}})},te=()=>{T(!0),h().fire({title:"Playing",html:"Text is being played...",showCancelButton:!0,showConfirmButton:!1,cancelButtonText:"Stop",allowOutsideClick:!1,cancelButtonClass:"#ffff00",didClose:()=>{T(!1)}}).then((e=>{e.dismiss===h().DismissReason.cancel&&_()}))},oe=async()=>{const e=JSON.parse(localStorage.getItem("ebookData"));if(e&&e.read)try{const t=await fetch("https://yeeplatformbackend.azurewebsites.net/updateViewedBooks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:d.j2.currentUser.uid,bookId:e.id})});await t.json()}catch(t){console.error("Error updating viewed books:",t)}},se=async()=>{const e=JSON.parse(localStorage.getItem("ebookData"));if(e)try{const t=await fetch("https://yeeplatformbackend.azurewebsites.net/updateEbookScores",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:d.j2.currentUser.uid,bookId:e.id,score:e.percentageVisited})});await t.json()}catch(t){console.error("Error updating ebook scores:",t)}},ne=async()=>{try{const e=localStorage.getItem("ebookID"),t=(localStorage.getItem("viewed"),await fetch("https://yeeplatformbackend.azurewebsites.net/recordEbookView",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:d.j2.currentUser.uid,ebookId:e})}));await t.json()}catch(e){console.error("Error recording ebook view:",e)}};return(0,b.jsxs)("div",{style:{height:"100vh",width:"100%"},children:[k&&(0,b.jsxs)(u.m,{children:[(0,b.jsx)("title",{children:(null===k||void 0===k?void 0:k.title)||"Ebook Reader - Yee FM"}),(0,b.jsx)("meta",{name:"description",content:(null===k||void 0===k?void 0:k.description)||"Read your favorite ebooks on Yee FM."}),(0,b.jsx)("meta",{name:"keywords",content:"Yee FM, ebooks, reading, literature, digital library"}),(0,b.jsx)("link",{rel:"icon",href:(null===k||void 0===k?void 0:k.coverImage)||(null===k||void 0===k?void 0:k.coverimage)||"https://assets-hfbubwfaacbch3e0.z02.azurefd.net/assets/images/Y.webp"}),(0,b.jsx)("meta",{property:"og:title",content:(null===k||void 0===k?void 0:k.title)||"Ebook Reader - Yee FM"}),(0,b.jsx)("meta",{property:"og:description",content:(null===k||void 0===k?void 0:k.description)||"Read your favorite ebooks on Yee FM."}),(0,b.jsx)("meta",{property:"og:image",content:(null===k||void 0===k?void 0:k.coverImage)||(null===k||void 0===k?void 0:k.coverimage)||"https://assets-hfbubwfaacbch3e0.z02.azurefd.net/assets/images/Y.webp"}),(0,b.jsx)("meta",{property:"og:type",content:"book"}),(0,b.jsx)("meta",{property:"og:url",content:window.location.href})]}),(0,b.jsx)("style",{jsx:!0,children:"\n      @media only screen and (max-width: 500px) {\n        /* Styles for mobile devices */\n        .pdf-viewer {\n          width: 100%;\n          height: auto;\n        }\n      }\n\n      .rpv-core__viewer--loading .rpv-core__viewer-document {\n        visibility: hidden;\n      }\n    "}),t?(0,b.jsx)("div",{children:"Loading..."}):x?(0,b.jsx)(i.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,b.jsx)(i.Viewer,{transformGetDocumentParams:e=>Object.assign({},e,{url:x,disableRange:!1,disableStream:!1,rangeChunkSize:65536,disableAutoFetch:!1,disableFontFace:!0}),scrollMode:i.ScrollMode.Page,defaultScale:Z,onPageChange:async t=>{let{currentPage:o}=t;E(o),P([...I,o]);const s=new Set(I).size,n=s/M*100;n>=30&&(await oe(),await se());const i={id:e,pageNumbers:I,uniquePageCount:s,percentageVisited:n,read:n>=30};localStorage.setItem("ebookData",JSON.stringify(i));JSON.parse(localStorage.getItem("ebookData"))},onDocumentLoad:t=>{let{doc:o}=t;z(o.numPages),localStorage.getItem("ebookID")!==e&&(localStorage.setItem("ebookID",e),localStorage.setItem("viewed","true"),ne())},renderLoader:e=>(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-yellow-500 font-bold",children:"Please wait, it's coming..."}),(0,b.jsx)("div",{style:{width:"100%"},children:(0,b.jsx)(K,{value:Math.round(e)})})]}),plugins:[$,Q]})}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,b.jsx)(w.A,{severity:"error",children:"No PDF found."})})})]})}}}]);
//# sourceMappingURL=4026.d6678e06.chunk.js.map