"use strict";(self.webpackChunkyeeplatform=self.webpackChunkyeeplatform||[]).push([[8522],{58522:(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var o=i(72791),n=i(20890),s=i(39281),r=i(35527),c=i(79836),l=i(56890),d=i(35855),h=i(53994),a=i(53382),p=i(94294),u=i(5289),x=i(10387),j=i(39157),Z=i(51691),w=i(40412),f=i(97123),g=i(21830),b=i.n(g),k=i(61567),y=i(80184);const m=()=>{const[e,t]=(0,o.useState)([]),[i,g]=(0,o.useState)(!1),[m,C]=(0,o.useState)(""),[v,S]=(0,o.useState)(""),D=async()=>{try{b().showLoading();const e=k.I8.currentUser.uid;console.log("here is the author id"+e);const i=await fetch("http://localhost:3000/getAllBooks/".concat(e)),o=await i.json();t(o),b().close()}catch(e){b().fire({icon:"error",title:"Oops...",text:"Something went wrong while fetching books!"})}};(0,o.useEffect)((()=>{D()}),[]);const B=()=>{g(!1)},E=async e=>{try{b().showLoading();if(200!==(await fetch("http://localhost:3000/deleteBook/".concat(e),{method:"DELETE"})).status)throw new Error("Failed to delete the book.");t((t=>t.filter((t=>t.id!==e)))),b().close()}catch(i){b().fire({icon:"error",title:"Oops...",text:"Something went wrong while deleting the book!"})}};return(0,y.jsxs)("div",{children:[(0,y.jsx)(n.Z,{variant:"h4",component:"h2",children:"My Books"}),(0,y.jsxs)(s.Z,{component:r.Z,children:[(0,y.jsxs)(c.Z,{children:[(0,y.jsx)(l.Z,{children:(0,y.jsxs)(d.Z,{children:[(0,y.jsx)(h.Z,{children:"Title"}),(0,y.jsx)(h.Z,{children:"Subtitle"}),(0,y.jsx)(h.Z,{children:"Description"}),(0,y.jsx)(h.Z,{children:"Publication Date"}),(0,y.jsx)(h.Z,{children:"Actions"})]})}),(0,y.jsx)(a.Z,{children:e.map((e=>(0,y.jsxs)(d.Z,{children:[(0,y.jsx)(h.Z,{children:e.title}),(0,y.jsx)(h.Z,{children:e.subtitle}),(0,y.jsx)(h.Z,{children:e.description}),(0,y.jsx)(h.Z,{children:e.publishedDate}),(0,y.jsxs)(h.Z,{children:[(0,y.jsx)(p.Z,{onClick:()=>{return t=e.description,i=e._id,C(t),S(i),void g(!0);var t,i},children:"Edit"}),(0,y.jsx)(p.Z,{onClick:()=>(e=>{b().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async t=>{t.isConfirmed&&(await E(e._id),D(),b().fire("Deleted!","Your book has been deleted.","success"))}))})(e),children:"Delete"})]})]},e._id)))})]}),0===e.length&&(0,y.jsx)(n.Z,{variant:"h6",style:{textAlign:"center",padding:"20px",color:"grey"},children:"No data available."})]}),(0,y.jsxs)(u.Z,{open:i,onClose:B,children:[(0,y.jsx)(x.Z,{children:"Edit Book Description"}),(0,y.jsxs)(j.Z,{children:[(0,y.jsx)(Z.Z,{children:"Please edit the description of the selected book."}),(0,y.jsx)(w.Z,{autoFocus:!0,margin:"dense",id:"description",label:"Description",type:"text",fullWidth:!0,value:m,onChange:e=>C(e.target.value)})]}),(0,y.jsxs)(f.Z,{children:[(0,y.jsx)(p.Z,{onClick:B,children:"Cancel"}),(0,y.jsx)(p.Z,{onClick:async()=>{try{b().showLoading(),console.log("Here is book id "+v);if(200!==(await fetch("http://localhost:3000/updateDescription",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:v,description:m})})).status)throw new Error("Failed to update the description.");t((e=>e.map((e=>e.id===v?{...e,description:m}:e)))),g(!1),b().close()}catch(e){b().fire({icon:"error",title:"Oops...",text:"Something went wrong while updating the description!"})}},children:"Save"})]})]})]})}}}]);
//# sourceMappingURL=8522.c9424bf3.chunk.js.map