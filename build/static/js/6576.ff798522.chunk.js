"use strict";(self.webpackChunkyeeplatform=self.webpackChunkyeeplatform||[]).push([[6576],{86576:(e,t,o)=>{o.r(t),o.d(t,{default:()=>m});var i=o(72791),n=o(20890),s=o(39281),r=o(35527),c=o(79836),l=o(56890),d=o(35855),a=o(53994),h=o(53382),u=o(94294),x=o(5289),p=o(10387),j=o(39157),f=o(51691),Z=o(40412),w=o(97123),k=o(61567),g=o(21830),y=o.n(g),b=o(80184);const m=()=>{const[e,t]=(0,i.useState)([]),[o,g]=(0,i.useState)(!1),[m,C]=(0,i.useState)(""),[E,v]=(0,i.useState)(""),T=async()=>{y().showLoading();try{const e=await fetch("http://localhost:3000/getauthoraudios?userId=".concat(k.I8.currentUser.uid));if(!e.ok)throw new Error("Error fetching audiobooks: ".concat(e.statusText));{const o=await e.json();t(o)}}catch(e){console.error("Error fetching audiobooks:",e)}finally{y().close()}};(0,i.useEffect)((()=>{T()}),[]);const D=()=>{g(!1)};return(0,b.jsxs)("div",{children:[(0,b.jsx)(n.Z,{variant:"h4",component:"h2",children:"My Audio books"}),(0,b.jsxs)(s.Z,{component:r.Z,children:[(0,b.jsxs)(c.Z,{children:[(0,b.jsx)(l.Z,{children:(0,b.jsxs)(d.Z,{children:[(0,b.jsx)(a.Z,{children:"Title"}),(0,b.jsx)(a.Z,{children:"Published On"}),(0,b.jsx)(a.Z,{children:"Description"}),(0,b.jsx)(a.Z,{children:"Duration"}),(0,b.jsx)(a.Z,{children:"Actions"})]})}),(0,b.jsx)(h.Z,{children:e.map((e=>(0,b.jsxs)(d.Z,{children:[(0,b.jsx)(a.Z,{children:e.title}),(0,b.jsx)(a.Z,{children:e.publishedDate}),(0,b.jsx)(a.Z,{children:e.description}),(0,b.jsx)(a.Z,{children:e.duration}),(0,b.jsxs)(a.Z,{children:[(0,b.jsx)(u.Z,{onClick:()=>{return t=e.description,o=e._id,C(t),v(o),void g(!0);var t,o},children:"Edit"}),(0,b.jsx)(u.Z,{onClick:()=>(async e=>{y().fire({title:"Are you sure?",text:"This will permanently delete the audiobook.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async o=>{if(o.isConfirmed)try{y().showLoading();const o=await fetch("http://localhost:3000/deleteAudiobook/".concat(e),{method:"DELETE"});if(!o.ok)throw new Error("Failed to delete the book: ".concat(o.statusText));t((t=>t.filter((t=>t._id!==e)))),y().fire("Deleted!","The audiobook has been deleted.","success"),T()}catch(i){y().fire("Oops...","Something went wrong while deleting the book!","error")}finally{y().close(),D()}}))})(e._id),children:"Delete"})]})]},e._id)))})]}),0===e.length&&(0,b.jsx)(n.Z,{variant:"h6",style:{textAlign:"center",padding:"20px",color:"grey"},children:"No data available."})]}),(0,b.jsxs)(x.Z,{open:o,onClose:D,children:[(0,b.jsx)(p.Z,{children:"Edit Audiobook Description"}),(0,b.jsxs)(j.Z,{children:[(0,b.jsx)(f.Z,{children:"Please edit the description of the selected audiobook."}),(0,b.jsx)(Z.Z,{autoFocus:!0,margin:"dense",id:"description",label:"Description",type:"text",fullWidth:!0,value:m,onChange:e=>C(e.target.value)})]}),(0,b.jsxs)(w.Z,{children:[(0,b.jsx)(u.Z,{onClick:D,children:"Cancel"}),(0,b.jsx)(u.Z,{onClick:async()=>{try{y().showLoading();const e=await fetch("http://localhost:3000/updateABD",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:E,description:m})});if(!e.ok)throw new Error("Failed to update the description: ".concat(e.statusText));{const o=await e.json();t((e=>e.map((e=>e._id===E?o:e)))),g(!1),T()}}catch(e){y().fire("Oops...","Something went wrong while updating the description!","error")}finally{y().close(),D()}},children:"Save"})]})]})]})}}}]);
//# sourceMappingURL=6576.ff798522.chunk.js.map