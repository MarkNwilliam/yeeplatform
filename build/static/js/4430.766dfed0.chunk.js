"use strict";(self.webpackChunkyeeplatform=self.webpackChunkyeeplatform||[]).push([[4430],{46681:(e,t,o)=>{o.d(t,{A:()=>r});var a=o(65043),s=o(71935),n=(o(88331),o(70579));const r=e=>{let{handleNewUserMessage:t}=e;const[o,r]=(0,a.useState)(!0);return(0,n.jsx)(s.Widget,{handleNewUserMessage:t,title:"Ebook Chatbot",subtitle:"Ask me anything about this ebook",profileAvatar:"https://assets-hfbubwfaacbch3e0.z02.azurefd.net/assets/images/Y.webp",emojis:"true",handleToggle:e=>{r((e=>!e))}})}},97949:(e,t,o)=>{o.d(t,{A:()=>n});o(65043);var a=o(519),s=o(70579);const n=e=>{let{shareUrl:t,selectedText:o}=e;const n='Check out this quote: "'.concat(o,'" from @YeePlatform! ').concat("https://www.yeeplatform.com"," #").concat("YeePlatform");return(0,s.jsxs)("div",{className:"share-box w-full max-w-md mx-auto p-4",children:[(0,s.jsxs)("div",{className:"share-header mb-4",children:[(0,s.jsx)("img",{src:"https://assets-hfbubwfaacbch3e0.z02.azurefd.net/assets/images/Y.webp",alt:"YeePlatform Logo",className:"logo w-12 h-auto"}),(0,s.jsx)("span",{className:"share-title text-lg",children:"Share this quote with friends:"})]}),(0,s.jsxs)("div",{className:"share-icons flex justify-center",children:[(0,s.jsx)(a.uI,{title:"Test",url:t,quote:n,children:(0,s.jsx)(a.ik,{size:32,round:!0})}),(0,s.jsx)(a.r6,{url:t,title:n,children:(0,s.jsx)(a.Fi,{size:32,round:!0})}),(0,s.jsx)(a.wk,{url:t,title:n,children:(0,s.jsx)(a._z,{size:32,round:!0})}),(0,s.jsx)(a.Kz,{url:t,title:n,children:(0,s.jsx)(a.Y4,{size:32,round:!0})}),(0,s.jsx)(a.Ot,{url:t,subject:"Check out this quote",body:n,children:(0,s.jsx)(a.aZ,{size:32,round:!0})})]})]})}},5399:(e,t,o)=>{o.d(t,{$s:()=>s.$s,CI:()=>n.CI,Cg:()=>d,HF:()=>n.HF,df:()=>n.df,hg:()=>n.hg,j2:()=>l,x9:()=>n.x9,zS:()=>i});var a=o(37064),s=o(82413),n=o(32813);const r=(0,a.Wp)({apiKey:"AIzaSyBXS56tIro9cd-Sd4ySn5AwLw3T6cnMHr0",authDomain:"yeeplatform.firebaseapp.com",projectId:"yeeplatform",storageBucket:"yeeplatform.appspot.com",messagingSenderId:"272587831821",appId:"1:272587831821:web:b612b427ff43968f33f344",measurementId:"G-YZV03469PP"});let i;(0,s.TT)().then((e=>{e&&(i=(0,s.P5)(r))}));const l=(0,n.xI)(r),d=(e,t)=>{i?(0,s.$s)(i,e,t):console.warn("Firebase Analytics is not initialized yet.")}},8653:(e,t,o)=>{o.r(t),o.d(t,{default:()=>M});var a=o(65043),s=o(73216),n=o(73237),r=o(64980),i=o(86691),l=o(5399),d=o(46749),c=o(56409),p=(o(89709),o(91148),o(85369)),u=o(30064),x=o.n(u),g=o(41591),h=(o(97949),o(48698),o(68817)),m=o(68016),f=o(81637),j=o(85865),b=o(96446),y=o(67254),v=o(46681),w=o(71935),S=o(86213),k=o(1043),I=o.n(k),C=o(81929),z=o.n(C),P=o(70579);const M=function(){var e;const{id:t}=(0,s.g)(),[o,u]=(0,a.useState)(!1),[k,C]=(0,a.useState)(null),[M,A]=(0,a.useState)(null),[N,O]=(0,a.useState)([]),[T,F]=(0,a.useState)(0),[E,L]=(0,a.useState)(1),[_,D]=(0,a.useState)(!1),[Y,U]=(0,a.useState)(null),R=()=>{D(!0)},V=()=>{D(!1)},J=(0,s.Zp)(),W=(0,i.A)("(max-width:626px)"),B=(0,i.A)("(max-width:400px)"),Z=W?.8:1,q=B?"wrap":"nowrap",H=null===(e=l.j2.currentUser)||void 0===e?void 0:e.email;function G(e){return(0,P.jsxs)(b.A,{sx:{position:"relative",display:"inline-flex"},children:[(0,P.jsx)(f.A,{variant:"determinate",...e}),(0,P.jsx)(b.A,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,P.jsx)(j.A,{variant:"caption",component:"div",color:"text.secondary",children:"".concat(Math.round(e.value),"%")})})]})}(0,a.useEffect)((()=>{(async()=>{u(!0);try{const e=await fetch("https://yeeplatformbackend.azurewebsites.net/getEbook/".concat(t),{cache:"force-cache"});if(!e.ok)return void console.error("Response not OK:",e);const o=await e.json();A(o),C(null===o||void 0===o?void 0:o.ebookUrl),console.log(null===o||void 0===o?void 0:o.ebookUrl)}catch(e){console.error("Error fetching eBook content:",e.message)}finally{u(!1)}})()}),[t]);const K=async()=>{const e=await(async()=>{const e=await(0,d.getDocument)(k).promise,t=await e.getPage(E+1);return(await t.getTextContent()).items.map((e=>e.str)).join(" ")})();U(null);const{value:t}=await x().fire({title:"Select language",html:'\n        <form id="languageForm" style="display: flex; flex-direction: column; align-items: start;">\n            <label><input type="radio" name="language" value="eng"> English</label><br>\n            <label><input type="radio" name="language" value="swh"> Swahili</label><br>\n            <label><input type="radio" name="language" value="spa"> Spanish</label><br>\n            <label><input type="radio" name="language" value="arz"> Arabic</label><br>\n            <label><input type="radio" name="language" value="fra"> French</label><br>\n            \n          </form>\n        ',focusConfirm:!1,preConfirm:()=>{const e=document.getElementById("languageForm").elements.language;let t;for(let o=0;o<e.length;o++)if(e[o].checked){t=e[o].value;break}return t}});if(t){x().fire({title:"Loading...",allowOutsideClick:!1,onBeforeOpen:()=>{x().showLoading()}});let a=M.title.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"");try{const o=(await S.A.post("https://yeeplatform.com/server/synthesize",{text:e,book_title:a,page_number:E.toString(),language:t},{timeout:6e6})).data.audio_url;U("https://yeeplatform.com/server/"+o),x().close()}catch(o){x().fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:"<a href>Why do I have this issue?</a>"}),console.error("Error playing audio:",o)}}},$=(0,c.scrollModePlugin)(),{SwitchScrollModeButton:X}=$,Q=(0,r.defaultLayoutPlugin)({sidebarTabs:e=>[e[0],e[1]],renderToolbar:e=>(0,P.jsx)(e,{children:e=>{const{CurrentPageInput:o,SwitchTheme:a,EnterFullScreen:s,GoToNextPage:r,GoToPreviousPage:i,NumberOfPages:l,ShowSearchPopover:d,Zoom:c,ZoomIn:u,ZoomOut:x}=e;return(0,P.jsxs)("div",{style:{alignItems:"center",display:"flex",flexWrap:{defaultWrap:q},justifyContent:"space-between",width:"100%",height:"auto",backgroundColor:"#ffde5a",padding:"10px"},children:[(0,P.jsx)("div",{style:{padding:"0px 2px"},children:(0,P.jsx)("button",{onClick:()=>J("/ebooks/".concat(t)),children:(0,P.jsx)(p.QVr,{})})}),(0,P.jsx)("div",{style:{padding:"0px 2px"},children:(0,P.jsx)(d,{})}),(0,P.jsx)("div",{style:{padding:"0px 2px"},children:(0,P.jsx)(x,{})}),(0,P.jsx)("div",{style:{padding:"0px 2px"},children:(0,P.jsx)(c,{})}),(0,P.jsx)("div",{style:{padding:"0px 2px"},children:(0,P.jsx)(u,{})}),(0,P.jsx)("div",{style:{padding:"0px 2px",marginLeft:"auto"},children:(0,P.jsx)(i,{})}),(0,P.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"0px 2px"},children:[(0,P.jsx)(o,{})," / ",(0,P.jsx)(l,{})]}),(0,P.jsx)("div",{style:{padding:"0px 2px"},children:(0,P.jsx)(r,{})}),(0,P.jsx)("div",{style:{padding:"0px 2px"},children:(0,P.jsx)("button",{onClick:K,children:(0,P.jsx)(p.gSK,{})})}),!W&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{style:{padding:"0px 2px",marginLeft:"auto"},children:(0,P.jsx)(s,{})}),(0,P.jsx)("div",{style:{padding:"0px 2px",marginLeft:"auto"},children:(0,P.jsx)(a,{})}),(0,P.jsx)("div",{style:{padding:"0px 2px"},children:(0,P.jsx)(X,{mode:n.ScrollMode.Vertical})}),(0,P.jsx)("div",{style:{padding:"0px 2px"},children:(0,P.jsx)(X,{mode:n.ScrollMode.Horizontal})}),(0,P.jsx)("div",{style:{padding:"0px 2px"},children:(0,P.jsx)(X,{mode:n.ScrollMode.Wrapped})}),(0,P.jsx)("div",{style:{padding:"0px 2px"},children:(0,P.jsx)(X,{mode:n.ScrollMode.Page})})]}),W&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(m.A,{onClick:R,children:"Options"}),(0,P.jsxs)(h.Ay,{anchor:"right",open:_,onClose:V,children:[(0,P.jsx)("div",{style:{padding:"0px 2px",marginLeft:"auto"},children:(0,P.jsx)(s,{})}),(0,P.jsx)("div",{style:{padding:"0px 2px",marginLeft:"auto"},children:(0,P.jsx)(a,{})}),(0,P.jsx)("div",{style:{padding:"0px 2px"},children:(0,P.jsx)(X,{mode:n.ScrollMode.Vertical})}),(0,P.jsx)("div",{style:{padding:"0px 2px"},children:(0,P.jsx)(X,{mode:n.ScrollMode.Horizontal})}),(0,P.jsx)("div",{style:{padding:"0px 2px"},children:(0,P.jsx)(X,{mode:n.ScrollMode.Wrapped})}),(0,P.jsx)("div",{style:{padding:"0px 2px"},children:(0,P.jsx)(X,{mode:n.ScrollMode.Page})})]})]})]})}})}),ee=async()=>{const e=JSON.parse(localStorage.getItem("ebookData"));if(e&&e.read)try{const t=await fetch("https://yeeplatformbackend.azurewebsites.net/updateViewedBooks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:l.j2.currentUser.uid,bookId:e.id})});await t.json()}catch(t){console.error("Error updating viewed books:",t)}},te=async()=>{const e=JSON.parse(localStorage.getItem("ebookData"));if(e)try{await fetch("https://yeeplatformbackend.azurewebsites.net/updateEbookScores",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:l.j2.currentUser.uid,bookId:e.id,score:e.percentageVisited})})}catch(t){console.error("Error updating ebook scores:",t)}},oe=async()=>{try{const e=localStorage.getItem("ebookID");await fetch("https://yeeplatformbackend.azurewebsites.net/recordEbookView",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:l.j2.currentUser.uid,ebookId:e})})}catch(e){console.error("Error recording ebook view:",e)}};return(0,P.jsxs)("div",{style:{height:"100vh",width:"100%"},children:[M&&(0,P.jsxs)(g.m,{children:[(0,P.jsx)("title",{children:(null===M||void 0===M?void 0:M.title)||"Ebook Reader - Yee FM"}),(0,P.jsx)("meta",{name:"description",content:(null===M||void 0===M?void 0:M.description)||"Read your favorite ebooks on Yee FM."}),(0,P.jsx)("meta",{name:"keywords",content:"Yee FM, ebooks, reading, literature, digital library"}),(0,P.jsx)("link",{rel:"icon",href:(null===M||void 0===M?void 0:M.coverImage_optimized_url)||(null===M||void 0===M?void 0:M.coverImage)||(null===M||void 0===M?void 0:M.coverimage)||"https://assets-hfbubwfaacbch3e0.z02.azurefd.net/assets/images/Y.webp"}),(0,P.jsx)("meta",{property:"og:title",content:(null===M||void 0===M?void 0:M.title)||"Ebook Reader - Yee FM"}),(0,P.jsx)("meta",{property:"og:description",content:(null===M||void 0===M?void 0:M.description)||"Read your favorite ebooks on Yee FM."}),(0,P.jsx)("meta",{property:"og:image",content:(null===M||void 0===M?void 0:M.coverImage)||(null===M||void 0===M?void 0:M.coverimage)||"https://assets-hfbubwfaacbch3e0.z02.azurefd.net/assets/images/Y.webp"}),(0,P.jsx)("meta",{property:"og:type",content:"book"}),(0,P.jsx)("meta",{property:"og:url",content:window.location.href})]}),(0,P.jsx)("style",{jsx:!0,children:"\n      @media only screen and (max-width: 500px) {\n        /* Styles for mobile devices */\n        .pdf-viewer {\n          width: 100%;\n          height: auto;\n        }\n      }\n\n      .rpv-core__viewer--loading .rpv-core__viewer-document {\n        visibility: hidden;\n      }\n    "}),Y&&(0,P.jsx)(z(),{children:(0,P.jsxs)("div",{style:{position:"absolute",bottom:"10px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,backgroundColor:"transparent",padding:"10px",borderRadius:"10px",boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.1)"},children:[(0,P.jsx)(I(),{url:Y,controls:!0,playing:!0}),(0,P.jsx)("button",{onClick:()=>U(null),style:{marginTop:"10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"5px",padding:"5px 10px",cursor:"pointer"},children:"Cancel"})]})}),o?(0,P.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading..."}):k?(0,P.jsx)(n.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,P.jsx)(n.Viewer,{fileUrl:k,transformGetDocumentParams:e=>Object.assign({},e,{disableRange:!1,disableStream:!0,disableAutoFetch:!0}),scrollMode:n.ScrollMode.Page,defaultScale:Z,onPageChange:async e=>{let{currentPage:o}=e;L(o),O([...N,o]);const a=new Set(N).size,s=a/T*100;s>=30&&(await ee(),await te());const n={id:t,pageNumbers:N,uniquePageCount:a,percentageVisited:s,read:s>=30};localStorage.setItem("ebookData",JSON.stringify(n));JSON.parse(localStorage.getItem("ebookData"))},onDocumentLoad:e=>{let{doc:o}=e;F(o.numPages),localStorage.getItem("ebookID")!==t&&(localStorage.setItem("ebookID",t),localStorage.setItem("viewed","true"),oe())},renderLoader:e=>(0,P.jsxs)("div",{children:[(0,P.jsx)("h2",{className:"text-yellow-500 font-bold",children:"Please wait, it's coming..."}),(0,P.jsx)("div",{style:{width:"100%"},children:(0,P.jsx)(G,{value:Math.round(e)})})]}),plugins:[Q,$]})}):(0,P.jsx)(P.Fragment,{children:(0,P.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,P.jsx)(y.A,{severity:"error",children:"No PDF found."})})}),(0,P.jsx)(v.A,{handleNewUserMessage:e=>{(0,w.toggleMsgLoader)(),fetch("https://yeeplatform.com/server/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ebook_id:M._id,query:e,user_id:H||"guest",title:M.title||"test",Description:M.Description||"test"})}).then((e=>e.json())).then((e=>{(0,w.addResponseMessage)(e.response)})).catch((e=>{console.error("Error:",e),(0,w.addResponseMessage)("Sorry, something went wrong.")})).finally((()=>{(0,w.toggleMsgLoader)()}))}})]})}}}]);
//# sourceMappingURL=4430.766dfed0.chunk.js.map