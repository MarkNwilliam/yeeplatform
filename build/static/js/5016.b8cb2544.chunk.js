"use strict";(self.webpackChunkyeeplatform=self.webpackChunkyeeplatform||[]).push([[5016],{35016:(e,t,a)=>{a.r(t),a.d(t,{AuthContext:()=>o,AuthProvider:()=>l,default:()=>c,useAuth:()=>r});var i=a(65043),s=a(53536),n=a(70579);const o=(0,i.createContext)();function r(){return i.useContext(o)}function l(e){let{children:t}=e;const[r,l]=(0,i.useState)(!1),[c,u]=(0,i.useState)(null),[d,h]=(0,i.useState)(!0),[f,g]=(0,i.useState)((()=>JSON.parse(localStorage.getItem("isVerified"))||!1)),m=(0,i.useCallback)((0,s.debounce)((async e=>{if(e&&e.uid)try{const t=await fetch("https://yeeplatformbackend.azurewebsites.net/isAuthor/".concat(e.uid));if(t.ok){const e=await t.json();l(e.isAuthor)}}catch(t){}}),15e3),[]),w=(0,i.useCallback)((async(e,t)=>{const{auth:i,signInWithEmailAndPassword:s}=await Promise.all([a.e(2813),a.e(2548),a.e(5399)]).then(a.bind(a,5399));try{var n;const a=await s(i,e,t);u(a.user);const o=(null===(n=a.user)||void 0===n?void 0:n.emailVerified)||!1;g(o),localStorage.setItem("isVerified",o.toString())}catch(o){}}),[]),b=(0,i.useCallback)((async()=>{const{auth:e,signInWithPopup:t,GoogleAuthProvider:i}=await Promise.all([a.e(2813),a.e(2548),a.e(5399)]).then(a.bind(a,5399)),s=new i;try{var n;const a=await t(e,s);u(a.user);const i=(null===(n=a.user)||void 0===n?void 0:n.emailVerified)||!1;g(i),localStorage.setItem("isVerified",i.toString())}catch(o){}}),[]),y=(0,i.useCallback)((async()=>{const{auth:e,signOut:t}=await Promise.all([a.e(2813),a.e(2548),a.e(5399)]).then(a.bind(a,5399));try{await t(e),u(null),l(!1)}catch(i){}}),[]);(0,i.useEffect)((()=>{(async()=>{const{auth:e,onAuthStateChanged:t}=await Promise.all([a.e(2813),a.e(2548),a.e(5399)]).then(a.bind(a,5399)),i=t(e,(async e=>{u(e),h(!1),e&&(g(e.emailVerified),localStorage.setItem("isVerified",e.emailVerified.toString()))}))})()}),[]),(0,i.useEffect)((()=>{c&&m(c)}),[c,m]);const S={user:c,isAuthor:r,loading:d,isVerified:f,login:w,logout:y,loginWithGoogle:b};return(0,n.jsx)(o.Provider,{value:S,children:t})}const c=l}}]);
//# sourceMappingURL=5016.b8cb2544.chunk.js.map