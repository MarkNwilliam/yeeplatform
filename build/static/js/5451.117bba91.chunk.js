"use strict";(self.webpackChunkyeeplatform=self.webpackChunkyeeplatform||[]).push([[5451,8522,6576,8914],{46265:(e,t,o)=>{o.r(t),o.d(t,{default:()=>f});var r=o(72791),i=o(21830),a=o.n(i),n=o(61567),s=o(55294),l=o(20890),c=o(40412),d=o(15770),h=o(17638),u=o(90602),p=o(48969),x=o(86251),m=o(29675),g=o(80184);const j=500;const f=function(){const[e,t]=(0,r.useState)(null),[o,i]=(0,r.useState)(null),[f,b]=(0,r.useState)(""),[v,Z]=(0,r.useState)(""),[w,y]=(0,r.useState)([]),[C,k]=(0,r.useState)(""),[S,N]=(0,r.useState)(""),[E,P]=(0,r.useState)(""),[T,A]=(0,r.useState)(!1),[B,U]=(0,r.useState)(""),[L,D]=(0,r.useState)(""),[F,I]=(0,r.useState)(""),[O,W]=(0,r.useState)("free"),[M,R]=(0,r.useState)(""),[z,q]=(0,r.useState)(!1),[Y,_]=(0,r.useState)(!1),H=n.I8.currentUser.uid;return(0,r.useEffect)((()=>{const e=()=>{Y&&_(!1)};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[Y]),(0,g.jsxs)("div",{className:"p-8 bg-white shadow-md rounded-lg max-w-md mx-auto",children:[(0,g.jsx)(l.Z,{variant:"h4",className:"text-center mb-6",children:"Upload your Audiobook"}),(0,g.jsxs)("form",{onSubmit:async r=>{r.preventDefault();const n="notfree"===O;if(v.length>j)return void a().fire("Error","Description should not exceed ".concat(j," characters."),"error");if(e&&e.size>314572800)return void a().fire("Error","Audiobook file size should not exceed ".concat(300," MB."),"error");if(f.length<3||f.length>100)return void a().fire("Error","Title should be between ".concat(3," and ").concat(100," characters."),"error");if(!C)return void a().fire("Error","Please select a language.","error");const l=new Date;if(new Date(E)>l)return void a().fire("Error","Publication date cannot be in the future.","error");if(w.length<1)return void a().fire("Error","Please select at least ".concat(1," genre(s)."),"error");a().fire({title:"Uploading...",html:"Progress ....",allowEscapeKey:!1,allowOutsideClick:!1,showCancelButton:!1,showConfirmButton:!1,onBeforeOpen:()=>{a().showLoading()},onOpen:()=>{const e=a().getHtmlContainer(),t=document.createElement("div");t.setAttribute("class","sweetalert2-progress-steps"),e.appendChild(t)}});try{let r,l,c;if(o){const e=await(0,m.tg)(o,128);c=await(0,x.Z)(e,!0),console.log("Here is my thumbnail url "+c)}if(e&&(r=await(0,x.Z)(e)),o&&(console.log("Uploading coverFile: ",o),l=await(0,x.Z)(o),console.log("This is my coverurl "+l)),v.length>j)return void a().fire("Error","Description should not exceed ".concat(j," characters."),"error");if(!r||!l)throw new Error("Please select both audio and cover files.");const d={title:f,description:v,genres:w.join(", "),categories:w.join(", "),language:C,isbn:S,ebookUrl:r,coverUrl:l,thumbnailUrl:c,publicationDate:E,author_platform_id:H,Duration:F,monetization:n,audioUrl:r},h=await s.Z.post("http://localhost:3000/audiobookupload/".concat(H),d);if(a().close(),200!==h.status)throw new Error("Error while sending data to the server.");t(null),i(null),b(""),Z(""),y([]),k(""),N(""),I(""),P(""),U(""),D(""),W("free"),R(""),_(!0)}catch(c){a().fire("Error","Error uploading the audio. Please try again.","error"),console.error("Error uploading the audio:",c)}},encType:"multipart/form-data",children:[(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Title:"}),(0,g.jsx)(c.Z,{fullWidth:!0,variant:"outlined",value:f,onChange:e=>b(e.target.value),required:!0})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Description:"}),(0,g.jsx)(c.Z,{fullWidth:!0,multiline:!0,rows:4,variant:"outlined",value:v,onChange:e=>Z(e.target.value),required:!0,helperText:"".concat(v.length,"/").concat(j)})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)(p.Z,{label:"Upload Cover Image:",onChange:async e=>{const t=e.target.files[0];if(console.log("Handle Cover Change Function Called"),t){if(!(e=>e.size/1024/1024<=5)(t)){try{a().fire({icon:"error",title:"Error",text:"Image size should not exceed 5MB."}).then((()=>{i(null),U(""),R("")}))}catch(o){console.log(o)}return}const e=await(e=>new Promise((t=>{const o=new Image;o.onload=()=>{t(512===o.width&&800===o.height)},o.src=URL.createObjectURL(e)})))(t);if(!e){try{a().fire({icon:"error",title:"Error",text:"Image dimensions should be exactly 512x800 pixels.",timer:3e3}).then((()=>{i(null),U(""),R("")}))}catch(o){console.log(o)}return}i(t),U(t.name),R(URL.createObjectURL(t)),console.log("Function Execution Completed")}},fileName:B,accept:".jpg, .jpeg, .png",required:!0}),M&&(0,g.jsx)("div",{className:"image-preview",children:(0,g.jsx)("img",{src:M,alt:"Cover Preview",style:{maxWidth:"200px",maxHeight:"200px"}})})]}),(0,g.jsx)("div",{className:"mb-4",children:(0,g.jsx)(d.Z,{multiple:!0,options:["Fiction","Nonfiction","Science Fiction","Romance","Mystery/Thriller","Fantasy","Biography","History","Business/Economics","Self-help","Health/Fitness","Cooking/Food","Travel","Technology"],value:w,onChange:(e,t)=>y(t),renderInput:e=>(0,g.jsx)(c.Z,{...e,variant:"outlined",label:"Genres"})})}),(0,g.jsx)("div",{className:"mb-4",children:(0,g.jsx)(d.Z,{options:[{code:"eng",label:"English"},{code:"French",label:"French"},{code:"swahili",label:"Swahili"},{code:"amharic",label:"Amharic"},{code:"yoruba",label:"Yoruba"},{code:"oromo",label:"Oromo"},{code:"igbo",label:"Igbo"},{code:"zulu",label:"Zulu"},{code:"shona",label:"Shona"},{code:"xhosa",label:"Xhosa"},{code:"hausa",label:"Hausa"},{code:"fulani",label:"Fulani"}].map((e=>e.label)),value:C,onChange:(e,t)=>k(t),renderInput:e=>(0,g.jsx)(c.Z,{...e,variant:"outlined",label:"Language"})})}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"ISBN:"}),(0,g.jsx)(c.Z,{fullWidth:!0,variant:"outlined",value:S,onChange:e=>N(e.target.value)})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Monetization:"}),(0,g.jsxs)("select",{value:O,onChange:e=>W(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,g.jsx)("option",{value:"free",children:"Free"}),(0,g.jsx)("option",{value:"notfree",children:"Not Free"})]})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Publication Date:"}),(0,g.jsx)(c.Z,{type:"date",fullWidth:!0,variant:"outlined",value:E,onChange:e=>P(e.target.value),required:!0})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)(p.Z,{label:"Upload Audio File:",onChange:e=>{var o;t(e.target.files[0]),D((null===(o=e.target.files[0])||void 0===o?void 0:o.name)||""),(e=>{const t=URL.createObjectURL(e);let o=new Audio(t);o.onloadedmetadata=()=>{I(Math.floor(o.duration)),URL.revokeObjectURL(t)}})(e.target.files[0])},fileName:L,accept:".mp3, .wav",required:!0}),(0,g.jsxs)("div",{className:"text-sm text-gray-600",children:["Maximum file size: ",300," MB"]})]}),(0,g.jsx)("div",{className:"flex justify-center",children:(0,g.jsx)(u.Z,{buttonText:"Upload"})})]}),Y&&(0,g.jsx)(h.Z,{isOpen:Y,onClose:()=>{console.log("Closing success dialog"),_(!1)},points:100,message:"Well done! You're a real YeePlatform author."})]})}},74321:(e,t,o)=>{o.r(t),o.d(t,{default:()=>f});var r=o(72791),i=o(55294),a=o(21830),n=o.n(a),s=o(61567),l=o(15770),c=(o(81918),o(20890)),d=o(697),h=o(40412),u=o(17638),p=(o(59741),o(58510),o(86251)),x=o(29675),m=o(48969),g=o(90602),j=o(80184);const f=function(){const[e,t]=(0,r.useState)(null),[o,a]=(0,r.useState)(""),[f,b]=(0,r.useState)("free"),[v,Z]=(0,r.useState)(!1),[w,y]=(0,r.useState)(""),[C,k]=(0,r.useState)(""),[S,N]=(0,r.useState)(!1),[E,P]=(0,r.useState)(""),[T,A]=(0,r.useState)(!1),[B,U]=(0,r.useState)(0),[L,D]=(0,r.useState)(""),[F,I]=(0,r.useState)({duration:0,url:""}),[O,W]=(0,r.useState)(null),[M,R]=(0,r.useState)(null),[z,q]=(0,r.useState)({title:"",description:"",content:"",coverimage:"",type:"Audio",author_platform_id:"",categories:[],genres:[]}),Y=s.I8.currentUser.uid;return(0,r.useEffect)((()=>{const e=()=>{S&&A(!1)};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[S]),(0,j.jsxs)("div",{className:"p-8 bg-white shadow-md rounded-lg max-w-md mx-auto",children:[(0,j.jsx)(c.Z,{variant:"h4",gutterBottom:!0,children:"Upload Audio Chapter"}),(0,j.jsxs)("form",{onSubmit:async o=>{o.preventDefault();try{if(!e||!O)return void n().fire({icon:"error",title:"Missing Files",text:"Please ensure all required files are selected."});if(A(!0),U(5),D("Well done! You're a real YeePlatform author."),!z.coverimage)return void n().fire({icon:"error",title:"Oops...",text:"Please provide a cover image."});if(z.title.length<3||z.title.length>100)return void n().fire("Error","Title should be between ".concat(3," and ").concat(100," characters."),"error");if(!(e=>e&&e.size<=157286400)(e))return void n().fire("Error","Audio file size should not exceed ".concat(150,"MB."),"error");if(z.categories.length<1)return void n().fire("Error","Please select at least ".concat(1," category(ies)."),"error");n().fire({title:"Uploading...",text:"Please wait while your chapter is being uploaded.",showConfirmButton:!1,allowOutsideClick:!1,onBeforeOpen:()=>{n().showLoading()}});const o=await(0,p.Z)(z.coverimage),r=await(0,p.Z)(z.coverimage,!0),l=await(0,p.Z)(e),c=s.I8.currentUser;if(!c)return void n().fire({icon:"error",title:"Oops...",text:"No user logged in."});const d=await i.Z.post("http://localhost:3000/AudioChapterupload/".concat(c.uid),{...z,content:l,duration:F.duration,author_platform_id:Y,coverimage:o,thumbnailUrl:r});console.log("Attempting to close Swal and open dialog..."),n().close(),d.data&&d.data.message?(t(null),b("free"),y(""),k(""),q({title:"",description:"",content:"",coverimage:"",type:"Audio",author_platform_id:"",categories:[],genres:[]}),a(""),console.log("Form reset, attempting to open dialog..."),N(!0),console.log("Dialog should now be open:",v)):n().fire({icon:"error",title:"Oops...",text:"Failed to save chapter details."})}catch(r){n().fire({icon:"error",title:"Oops...",text:"Error during chapter upload."})}},children:[(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsx)(m.Z,{label:"Upload Cover Image:",onChange:async e=>{const t=e.target.files[0];if(t){if(!(e=>e.size/1024/1024<=5)(t))return void n().fire("Error","Image size should not exceed 5MB.","error");const e=await(e=>new Promise((t=>{const o=new Image;o.onload=()=>{t(512===o.width&&800===o.height)},o.src=URL.createObjectURL(e)})))(t);if(!e)return void n().fire("Error","Image dimensions should be exactly 512x800 pixels.","error");W(t);const o=await(0,x.tg)(t,256);R(o),y(t.name),a(URL.createObjectURL(t)),q({...z,coverimage:URL.createObjectURL(t)})}},fileName:w,accept:"image/*",required:!0}),o&&(0,j.jsx)(d.Z,{component:"img",src:o,alt:"Cover Preview",sx:{width:"100%",height:"auto",maxWidth:"200px",marginTop:"10px"}})]}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Title:"}),(0,j.jsx)(h.Z,{fullWidth:!0,variant:"outlined",type:"text",placeholder:"Title",value:z.title,onChange:e=>q({...z,title:e.target.value}),required:!0})]}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Categories:"}),(0,j.jsx)(l.Z,{multiple:!0,id:"tags-outlined",options:["Fiction","Nonfiction","Science Fiction","Romance","Mystery/Thriller","Fantasy","Biography","History","Business/Economics","Self-help","Health/Fitness","Cooking/Food","Travel","Technology"],getOptionLabel:e=>e,filterSelectedOptions:!0,value:z.categories,onChange:(e,t)=>{q({...z,categories:t})},renderInput:e=>(0,j.jsx)(h.Z,{...e,variant:"outlined",label:"Select Categories",placeholder:"Categories"})})]}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Monetization:"}),(0,j.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,j.jsx)("option",{value:"free",children:"Free"}),(0,j.jsx)("option",{value:"notfree",children:"Not Free"})]})]}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Description:"}),(0,j.jsx)(h.Z,{fullWidth:!0,multiline:!0,rows:4,variant:"outlined",value:z.description,onChange:e=>{e.target.value.length<=500&&q({...z,description:e.target.value})},helperText:"".concat(z.description.length,"/").concat(500),required:!0})]}),(0,j.jsx)("div",{className:"mb-4",children:(0,j.jsx)(m.Z,{label:"Upload Audio File:",onChange:e=>{const o=e.target.files[0];if(o){t(o),k(o.name);const e=new Audio(URL.createObjectURL(o));e.onloadedmetadata=function(){I({...F,duration:e.duration})}}},fileName:C,accept:"audio/*",required:!0})}),S&&(0,j.jsx)(u.Z,{isOpen:T,onClose:()=>A(!1),points:B,message:L}),(0,j.jsx)(g.Z,{buttonText:"Upload Chapter"})]})]})}},42246:(e,t,o)=>{o.r(t),o.d(t,{default:()=>b});var r=o(72791),i=o(57621),a=o(42169),n=o(20890),s=o(66647),l=o(39504),c=o(5289),d=o(10387),h=o(39157),u=o(51691),p=o(97123),x=o(94294),m=o(93457),g=o(80184);const j=(0,m.Z)(i.Z)({maxWidth:345}),f=(0,m.Z)(a.Z)({height:140});const b=function(){const[e,t]=(0,r.useState)(!1),o=()=>{t(!1)};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n.Z,{component:"h1",variant:"h4",children:"\ud83d\udcf0 News"}),(0,g.jsx)(j,{onClick:()=>{t(!0)},children:(0,g.jsxs)(s.Z,{children:[(0,g.jsx)(f,{component:"img",alt:"Logo",image:"/Y.webp",title:"Logo"}),(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(n.Z,{gutterBottom:!0,variant:"h5",component:"div",children:"Welcome to YeePlatform!"}),(0,g.jsx)(n.Z,{variant:"body2",color:"text.secondary",children:"Click here to learn more about our platform."})]})]})}),(0,g.jsxs)(c.Z,{open:e,onClose:o,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[(0,g.jsx)(d.Z,{id:"scroll-dialog-title",children:"Welcome to YeePlatform!"}),(0,g.jsx)(h.Z,{dividers:!0,children:(0,g.jsx)(u.Z,{id:"scroll-dialog-description",tabIndex:-1,children:"YeePlatform is an innovative subscription platform for authors and readers. We aim to provide an excellent user experience, allowing authors to share their work and readers to access a diverse range of content. Our platform offers a unique way for authors to publish their eBooks and audiobooks, with a subscription model that rewards creators based on the engagement of their work. Readers can enjoy access to a vast library of content, with various genres and target audiences to suit their preferences. Join us today and become a part of the YeePlatform community!"})}),(0,g.jsx)(p.Z,{children:(0,g.jsx)(x.Z,{onClick:o,color:"primary",children:"Close"})})]})]})}},24826:(e,t,o)=>{o.r(t),o.d(t,{default:()=>j});o(72791);var r=o(94294),i=o(20890),a=o(61889),n=o(40412),s=o(81918),l=o(697),c=o(93457),d=o(61134),h=o(95764),u=o(15770),p=o(80184);const x=(0,c.Z)("input")({display:"none"}),m=(0,c.Z)("form")((e=>{let{theme:t}=e;return{width:"100%",marginTop:t.spacing(1)}})),g=(0,c.Z)(r.Z)((e=>{let{theme:t}=e;return{margin:t.spacing(3,0,2)}}));const j=function(){var e,t,o,c,j,f,b;const{register:v,handleSubmit:Z,control:w,formState:{errors:y}}=(0,d.cI)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(i.Z,{variant:"h4",gutterBottom:!0,children:"Create NFT"}),(0,p.jsx)(i.Z,{color:"error",variant:"subtitle1",children:"Note: This page is still in the test phase."}),(0,p.jsx)(m,{onSubmit:Z((e=>{console.log(e)})),children:(0,p.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,p.jsx)(a.ZP,{item:!0,xs:12,children:(0,p.jsx)(n.Z,{fullWidth:!0,label:"Number of Shares",variant:"outlined",type:"number",...v("shares",{required:"Please enter the number of shares"}),error:!!y.shares,helperText:null===(e=y.shares)||void 0===e?void 0:e.message})}),(0,p.jsx)(a.ZP,{item:!0,xs:12,children:(0,p.jsx)(n.Z,{fullWidth:!0,label:"Share Price (in ETH)",variant:"outlined",type:"number",...v("sharePrice",{required:"Please enter the share price in ETH"}),error:!!y.sharePrice,helperText:null===(t=y.sharePrice)||void 0===t?void 0:t.message})}),(0,p.jsx)(a.ZP,{item:!0,xs:12,children:(0,p.jsx)(n.Z,{fullWidth:!0,label:"Book Title",variant:"outlined",...v("title",{required:"Please enter the book title"}),error:!!y.title,helperText:null===(o=y.title)||void 0===o?void 0:o.message})}),(0,p.jsx)(a.ZP,{item:!0,xs:12,children:(0,p.jsx)(n.Z,{fullWidth:!0,label:"Book Subtitle",variant:"outlined",...v("subtitle"),error:!!y.subtitle,helperText:null===(c=y.subtitle)||void 0===c?void 0:c.message})}),(0,p.jsx)(a.ZP,{item:!0,xs:12,children:(0,p.jsx)(n.Z,{fullWidth:!0,multiline:!0,rows:4,label:"Book Description",variant:"outlined",...v("description",{required:"Please enter the book description"}),error:!!y.description,helperText:null===(j=y.description)||void 0===j?void 0:j.message})}),(0,p.jsx)(a.ZP,{item:!0,xs:12,children:(0,p.jsx)(u.Z,{multiple:!0,options:["Fiction","Nonfiction","Science Fiction","Romance","Mystery/Thriller","Fantasy","Biography","History","Business/Economics","Self-help","Health/Fitness","Cooking/Food","Travel","Technology"],getOptionLabel:e=>e,renderTags:(e,t)=>e.map(((e,o)=>(0,p.jsx)(s.Z,{label:e,...t({index:o}),disabled:!0},o))),renderInput:e=>{var t;return(0,p.jsx)(n.Z,{...e,label:"Categories",variant:"outlined",fullWidth:!0,helperText:null===(t=y.categories)||void 0===t?void 0:t.message,error:!!y.categories})},control:w,name:"categories",rules:{required:"Please select at least one category"}})}),(0,p.jsx)(a.ZP,{item:!0,xs:12,children:(0,p.jsx)(u.Z,{multiple:!0,options:["Children","Young Adult","Adult","Senior"],getOptionLabel:e=>e,renderTags:(e,t)=>e.map(((e,o)=>(0,p.jsx)(s.Z,{label:e,...t({index:o}),disabled:!0},o))),renderInput:e=>{var t;return(0,p.jsx)(n.Z,{...e,label:"Target Audiences",variant:"outlined",fullWidth:!0,helperText:null===(t=y.targetAudiences)||void 0===t?void 0:t.message,error:!!y.targetAudiences})},control:w,name:"targetAudiences",rules:{required:"Please select at least one target audience"}})}),(0,p.jsx)(a.ZP,{item:!0,xs:12,children:(0,p.jsx)(n.Z,{fullWidth:!0,label:"Publication Date (if published)",type:"date",variant:"outlined",InputLabelProps:{shrink:!0},...v("publicationDate"),error:!!y.publicationDate,helperText:null===(f=y.publicationDate)||void 0===f?void 0:f.message})}),(0,p.jsx)(a.ZP,{item:!0,xs:12,children:(0,p.jsx)(n.Z,{fullWidth:!0,label:"ISBN (if applicable)",variant:"outlined",...v("isbn"),error:!!y.isbn,helperText:null===(b=y.isbn)||void 0===b?void 0:b.message})}),(0,p.jsxs)(a.ZP,{item:!0,xs:12,children:[(0,p.jsx)(i.Z,{variant:"h6",gutterBottom:!0,children:"Upload Cover Image (JPG, PNG)"}),(0,p.jsx)(x,{accept:"image/jpeg, image/png",id:"cover-image",type:"file",...v("coverImage",{required:"Please upload a cover image in JPG or PNG format"})}),(0,p.jsx)("label",{htmlFor:"cover-image",children:(0,p.jsx)(r.Z,{component:"span",variant:"outlined",startIcon:(0,p.jsx)(h.Z,{}),children:"Upload Cover Image"})}),y.coverImage&&(0,p.jsx)(l.Z,{mt:1,children:(0,p.jsx)(i.Z,{variant:"caption",color:"error",children:y.coverImage.message})})]}),(0,p.jsxs)(a.ZP,{item:!0,xs:12,children:[(0,p.jsx)(i.Z,{variant:"h6",gutterBottom:!0,children:"Upload Back Image (JPG, PNG)"}),(0,p.jsx)(x,{accept:"image/jpeg, image/png",id:"back-image",type:"file",...v("backImage",{required:"Please upload a back image in JPG or PNG format"})}),(0,p.jsx)("label",{htmlFor:"back-image",children:(0,p.jsx)(r.Z,{component:"span",variant:"outlined",startIcon:(0,p.jsx)(h.Z,{}),children:"Upload Back Image"})}),y.backImage&&(0,p.jsx)(l.Z,{mt:1,children:(0,p.jsx)(i.Z,{variant:"caption",color:"error",children:y.backImage.message})})]}),(0,p.jsxs)(a.ZP,{item:!0,xs:12,children:[(0,p.jsx)(i.Z,{variant:"h6",gutterBottom:!0,children:"Upload Ebook (PDF format)"}),(0,p.jsx)(x,{accept:".pdf",id:"ebook-pdf",type:"file",...v("ebookPdf",{required:"Please upload the ebook in PDF format"})}),(0,p.jsx)("label",{htmlFor:"ebook-pdf",children:(0,p.jsx)(r.Z,{component:"span",variant:"outlined",startIcon:(0,p.jsx)(h.Z,{}),children:"Upload Ebook PDF"})}),y.ebookPdf&&(0,p.jsx)(l.Z,{mt:1,children:(0,p.jsx)(i.Z,{variant:"caption",color:"error",children:y.ebookPdf.message})})]}),(0,p.jsx)(a.ZP,{item:!0,xs:12,children:(0,p.jsx)(g,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Submit"})})]})})]})}},24917:(e,t,o)=>{o.r(t),o.d(t,{default:()=>h});var r=o(72791),i=o(73575),a=o(21830),n=o.n(a),s=(o(48876),o(55294)),l=o(61567),c=o(34083),d=o(80184);function h(){var e,t,o;const{user:a}=(0,r.useContext)(i.Vo),[h,u]=(0,r.useState)({});(0,r.useEffect)((()=>{const e=l.I8.currentUser.uid;s.Z.get("http://localhost:3000/userDetails/".concat(e)).then((e=>{const t=e.data;u(t)})).catch((e=>{console.error("Error fetching user data:",e)}))}),[]);return(0,d.jsxs)("div",{className:"p-8 space-y-4",children:[(0,d.jsx)("h1",{className:"text-xl font-semibold",children:"Author Profile"}),(0,d.jsxs)("div",{className:"flex items-center justify-center space-x-4 relative",children:[(0,d.jsx)("img",{alt:"Profile Picture",src:h.profileImage||"/Y.webp",className:"w-32 h-32 rounded-full"}),(0,d.jsx)("input",{type:"file",id:"profilePic",className:"hidden",accept:"image/*",onChange:async e=>{if(0===e.target.files.length)return;n().fire({title:"Uploading...",text:"Your image is being uploaded. Please wait...",allowOutsideClick:!1,didOpen:()=>{n().showLoading()}});const t=new FormData;t.append("image",e.target.files[0]);const o=l.I8.currentUser.uid;try{var r;const e=await s.Z.post("http://localhost:3000/userprofilestore/".concat(o),t);if(null===(r=e.data)||void 0===r||!r.imageUrl)throw new Error("Image upload failed");u((t=>({...t,profileImage:e.data.imageUrl}))),n().fire("Success","Image uploaded successfully!","success")}catch(i){n().fire("Oops...","Error uploading the image!","error")}}}),(0,d.jsx)("label",{htmlFor:"profilePic",className:"cursor-pointer absolute bottom-2 right-2 bg-gray-600 bg-opacity-50 rounded-full p-2",children:"\ud83d\udcf7"})]}),(0,d.jsx)("input",{className:"w-full p-2 border rounded-md",type:"text",placeholder:"Name",value:h.username||"",onChange:e=>u((t=>({...t,username:e.target.value})))}),(0,d.jsx)("input",{className:"w-full p-2 border rounded-md",type:"text",placeholder:"Age",value:h.age||"",onChange:e=>u((t=>({...t,age:e.target.value})))}),(0,d.jsx)("textarea",{className:"w-full p-2 border rounded-md",placeholder:"Bio",value:h.bio||"",onChange:e=>u((t=>({...t,bio:e.target.value})))}),(0,d.jsxs)("select",{className:"w-full p-2 border rounded-md",value:h.country||"",onChange:e=>u((t=>({...t,country:e.target.value}))),children:[(0,d.jsx)("option",{value:"",children:"Select a country"}),c.h.map((e=>(0,d.jsx)("option",{value:e,children:e},e)))]}),(0,d.jsx)("input",{className:"w-full p-2 border rounded-md",type:"text",placeholder:"Email",value:h.email||"",readOnly:!0}),(0,d.jsx)("input",{className:"w-full p-2 border rounded-md",type:"text",placeholder:"Phone",value:h.phone||"",onChange:e=>u((t=>({...t,phone:e.target.value})))}),(0,d.jsx)("input",{className:"w-full p-2 border rounded-md",type:"text",placeholder:"Twitter",value:(null===(e=h.socialLinks)||void 0===e?void 0:e.twitter)||"",onChange:e=>u((t=>({...t,socialLinks:{...t.socialLinks,twitter:e.target.value}})))}),(0,d.jsx)("input",{className:"w-full p-2 border rounded-md",type:"text",placeholder:"Instagram",value:(null===(t=h.socialLinks)||void 0===t?void 0:t.instagram)||"",onChange:e=>u((t=>({...t,socialLinks:{...t.socialLinks,instagram:e.target.value}})))}),(0,d.jsx)("input",{className:"w-full p-2 border rounded-md",type:"text",placeholder:"Facebook",value:(null===(o=h.socialLinks)||void 0===o?void 0:o.facebook)||"",onChange:e=>u((t=>({...t,socialLinks:{...t.socialLinks,facebook:e.target.value}})))}),(0,d.jsx)("button",{className:"w-full p-2 mt-4 text-white bg-blue-500 rounded-md",onClick:async()=>{n().fire({title:"Updating...",text:"Your profile is being updated. Please wait...",allowOutsideClick:!1,didOpen:()=>{n().showLoading()}});const e=l.I8.currentUser.uid;try{const t=await s.Z.put("http://localhost:3000/updateaccountinfo/".concat(e),h);if(!t.data.success||"User data updated successfully"!==t.data.message)throw new Error("Profile update failed");n().fire("Success","Profile updated successfully!","success")}catch(t){n().fire("Oops...","Error updating your profile!","error")}},children:"Update Profile"})]})}},57805:(e,t,o)=>{o.r(t),o.d(t,{default:()=>v});o(72791);var r=o(19913),i=o(82165),a=o(82839),n=o(90466),s=o(12891),l=o(71827),c=o(27281),d=o(62066),h=o(38725),u=o(2339),p=o(89164),x=o(20890),m=o(61889),g=o(697),j=o(80184);const f=[],b=[];const v=function(){return(0,j.jsxs)(p.Z,{children:[(0,j.jsx)(x.Z,{variant:"h4",gutterBottom:!0,children:"Author Statistics"}),(0,j.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,j.jsxs)(m.ZP,{item:!0,xs:12,sm:6,children:[(0,j.jsx)(x.Z,{variant:"h6",gutterBottom:!0,children:"Total monthly earnings"}),(0,j.jsx)(r.h,{width:"100%",height:300,children:(0,j.jsxs)(i.w,{data:b,children:[(0,j.jsx)(a.q,{strokeDasharray:"3 3"}),(0,j.jsx)(n.K,{dataKey:"month"}),(0,j.jsx)(s.B,{}),(0,j.jsx)(l.u,{}),(0,j.jsx)(c.D,{}),(0,j.jsx)(d.x,{type:"monotone",dataKey:"earnings",stroke:"#8884d8",activeDot:{r:8}})]})})]}),(0,j.jsxs)(m.ZP,{item:!0,xs:12,sm:6,children:[(0,j.jsx)(x.Z,{variant:"h6",gutterBottom:!0,children:"Readers vs. Listeners"}),(0,j.jsx)(r.h,{width:"100%",height:300,children:(0,j.jsxs)(h.v,{data:f,children:[(0,j.jsx)(a.q,{strokeDasharray:"3 3"}),(0,j.jsx)(n.K,{dataKey:"content"}),(0,j.jsx)(s.B,{}),(0,j.jsx)(l.u,{}),(0,j.jsx)(c.D,{}),(0,j.jsx)(u.$,{dataKey:"readers",fill:"#8884d8"}),(0,j.jsx)(u.$,{dataKey:"listeners",fill:"#82ca9d"})]})})]}),(0,j.jsxs)(m.ZP,{item:!0,xs:12,sm:4,children:[(0,j.jsx)(x.Z,{variant:"h6",gutterBottom:!0,children:"Number of eBooks"}),(0,j.jsx)(g.Z,{fontWeight:"fontWeightBold",fontSize:"h4.fontSize",children:"0"})]}),(0,j.jsxs)(m.ZP,{item:!0,xs:12,sm:4,children:[(0,j.jsx)(x.Z,{variant:"h6",gutterBottom:!0,children:"Number of Audiobooks"}),(0,j.jsx)(g.Z,{fontWeight:"fontWeightBold",fontSize:"h4.fontSize",children:"0"})]}),(0,j.jsxs)(m.ZP,{item:!0,xs:12,sm:4,children:[(0,j.jsx)(x.Z,{variant:"h6",gutterBottom:!0,children:"Total Earnings"}),(0,j.jsx)(g.Z,{fontWeight:"fontWeightBold",fontSize:"h4.fontSize",children:"$0"})]})]})]})}},36995:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});o(72791);var r=o(20890),i=o(94294),a=o(6409),n=o(44281),s=o(80184);function l(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{children:"\n          @keyframes yellowBubbles {\n            0% {\n              background-position: 0% 50%;\n            }\n            50% {\n              background-position: 100% 50%;\n            }\n            100% {\n              background-position: 0% 50%;\n            }\n          }\n\n          .yellowBubblesAnimation {\n            background: radial-gradient(circle, rgba(255,255,224,1) 0%, rgba(255,255,224,0) 70%);\n            background-size: 200% 200%;\n            animation: yellowBubbles 5s ease infinite;\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n          }\n        "}),(0,s.jsx)("div",{className:"yellowBubblesAnimation"}),(0,s.jsx)(r.Z,{component:"h1",variant:"h5",children:"Support"}),(0,s.jsx)(i.Z,{variant:"contained",color:"primary",startIcon:(0,s.jsx)(a.Z,{}),onClick:()=>{window.open("https://wa.me/256784906354","_blank")},sx:{mt:2},children:"Contact via WhatsApp"}),(0,s.jsx)(i.Z,{variant:"outlined",color:"primary",startIcon:(0,s.jsx)(n.Z,{}),onClick:()=>{window.location.href="mailto:nkugwamarkwilliam@gmail.com"},sx:{mt:2,ml:2},children:"Contact via Email"})]})}},79912:(e,t,o)=>{o.r(t),o.d(t,{default:()=>g});var r=o(72791),i=o(21830),a=o.n(i),n=o(98011),s=o(20890),l=o(15770),c=o(40412),d=o(48969),h=o(90602),u=o(17638),p=o(29675),x=o(86251),m=o(80184);const g=()=>{var e;const[t,o]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=()=>{t&&o(!1)};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[t]);const[i,g]=(0,r.useState)(""),[j,f]=(0,r.useState)(""),[b,v]=(0,r.useState)(""),[Z,w]=(0,r.useState)(null),[y,C]=(0,r.useState)(""),[k,S]=(0,r.useState)(!1),[N,E]=(0,r.useState)([]),[P,T]=(0,r.useState)(""),[A,B]=(0,r.useState)(null),U=e=>new Promise((t=>{const o=new Image;o.onload=()=>{t(512===o.width&&800===o.height)},o.src=URL.createObjectURL(e)})),L=null===(e=(0,n.v0)().currentUser)||void 0===e?void 0:e.uid;return(0,m.jsxs)("div",{className:"p-8 bg-white shadow-md rounded-lg max-w-md mx-auto",children:[(0,m.jsx)(s.Z,{variant:"h4",className:"text-center mb-6",children:"Upload a Chapter"}),(0,m.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i.length<5||j.length<20||b.length<100)return void a().fire("Error!","Please ensure all fields meet the minimum length requirements.","error");a().fire({title:"Uploading...",text:"Please wait...",allowEscapeKey:!1,allowOutsideClick:!1,showConfirmButton:!1,onBeforeOpen:()=>{a().showLoading()}});let t="";if(A)try{const e=await(0,p.tg)(Z,256);t=await(0,x.Z)(e,!0)}catch(n){return console.error("Error resizing image:",n),void a().fire("Error","Failed to resize the image.","error")}const r=new FormData;r.append("title",i),r.append("description",j),r.append("content",b),r.append("type","Text"),r.append("author_platform_id",L),r.append("categories",N.join(", ")),r.append("thumbnailUrl",t),Z&&r.append("coverimage",Z);try{const e=await fetch("http://localhost:3000/uploadchapter/".concat(L),{method:"POST",body:r}),t=await e.text();if(console.log("Response Status:",e.status),console.log("Response Body:",t),a().close(),!e.ok)throw new Error("Error uploading chapter");JSON.parse(t);o(!0),g(""),f(""),v(""),w(null),C(""),T(""),E([])}catch(n){a().close(),a().fire("Error!",n.message,"error")}},children:[(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{htmlFor:"title",className:"block text-gray-700 text-sm font-bold mb-2",children:"Title"}),(0,m.jsx)("input",{type:"text",id:"title",className:"w-full p-2 border rounded",value:i,onChange:e=>g(e.target.value),required:!0}),(0,m.jsxs)("p",{className:"text-right text-xs",children:[i.length,"/",100]})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{htmlFor:"description",className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),(0,m.jsx)("textarea",{id:"description",className:"w-full p-2 border rounded",value:j,onChange:e=>f(e.target.value),required:!0}),(0,m.jsxs)("p",{className:"text-right text-xs",children:[j.length,"/",500]})]}),(0,m.jsx)("div",{className:"mb-4",children:(0,m.jsx)(l.Z,{multiple:!0,options:["Fiction","Nonfiction","Science Fiction","Romance","Mystery/Thriller","Fantasy","Biography","History","Business/Economics","Self-help","Health/Fitness","Cooking/Food","Travel","Technology"],getOptionLabel:e=>e,filterSelectedOptions:!0,value:N,onChange:(e,t)=>E(t),renderInput:e=>(0,m.jsx)(c.Z,{...e,variant:"outlined",label:"Categories",placeholder:"Select Categories"})})}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{htmlFor:"content",className:"block text-gray-700 text-sm font-bold mb-2",children:"Content"}),(0,m.jsx)("textarea",{id:"content",rows:"10",className:"w-full p-2 border rounded",value:b,onChange:e=>v(e.target.value),required:!0}),(0,m.jsxs)("p",{className:"text-right text-xs",children:[b.length,"/",1e4]})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)(d.Z,{onChange:async e=>{const t=e.target.files[0];if(t){if(!(0,p.Rn)(t,.001,5))return void a().fire("Error","Image size should not exceed 5MB.","error");if(!await U(t,512,800))return void a().fire("Error","Invalid image dimensions.","error");try{w(t),C(t.name),T(URL.createObjectURL(t))}catch(o){console.error("Error resizing image:",o),a().fire("Error","Failed to resize the image.","error")}}},fileName:y,accept:".jpg, .jpeg, .png",label:"Upload Cover Image (Max size: ".concat(5,"MB)")}),P&&(0,m.jsx)("img",{src:P,alt:"Cover Preview",className:"mt-4 w-full h-auto"})]}),(0,m.jsx)("div",{className:"flex justify-center",children:(0,m.jsx)(h.Z,{buttonText:"Upload"})})]}),t&&(0,m.jsx)(u.Z,{isOpen:t,onClose:()=>o(!1),points:5,message:"Well done! You're a real YeePlatform author."})]})}},86576:(e,t,o)=>{o.r(t),o.d(t,{default:()=>y});var r=o(72791),i=o(20890),a=o(39281),n=o(35527),s=o(79836),l=o(56890),c=o(35855),d=o(53994),h=o(53382),u=o(94294),p=o(5289),x=o(10387),m=o(39157),g=o(51691),j=o(40412),f=o(97123),b=o(61567),v=o(21830),Z=o.n(v),w=o(80184);const y=()=>{const[e,t]=(0,r.useState)([]),[o,v]=(0,r.useState)(!1),[y,C]=(0,r.useState)(""),[k,S]=(0,r.useState)(""),N=async()=>{Z().showLoading();try{const e=await fetch("http://localhost:3000/getauthoraudios?userId=".concat(b.I8.currentUser.uid));if(!e.ok)throw new Error("Error fetching audiobooks: ".concat(e.statusText));{const o=await e.json();t(o)}}catch(e){console.error("Error fetching audiobooks:",e)}finally{Z().close()}};(0,r.useEffect)((()=>{N()}),[]);const E=()=>{v(!1)};return(0,w.jsxs)("div",{children:[(0,w.jsx)(i.Z,{variant:"h4",component:"h2",children:"My Audio books"}),(0,w.jsxs)(a.Z,{component:n.Z,children:[(0,w.jsxs)(s.Z,{children:[(0,w.jsx)(l.Z,{children:(0,w.jsxs)(c.Z,{children:[(0,w.jsx)(d.Z,{children:"Title"}),(0,w.jsx)(d.Z,{children:"Published On"}),(0,w.jsx)(d.Z,{children:"Description"}),(0,w.jsx)(d.Z,{children:"Duration"}),(0,w.jsx)(d.Z,{children:"Actions"})]})}),(0,w.jsx)(h.Z,{children:e.map((e=>(0,w.jsxs)(c.Z,{children:[(0,w.jsx)(d.Z,{children:e.title}),(0,w.jsx)(d.Z,{children:e.publishedDate}),(0,w.jsx)(d.Z,{children:e.description}),(0,w.jsx)(d.Z,{children:e.duration}),(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(u.Z,{onClick:()=>{return t=e.description,o=e._id,C(t),S(o),void v(!0);var t,o},children:"Edit"}),(0,w.jsx)(u.Z,{onClick:()=>(async e=>{Z().fire({title:"Are you sure?",text:"This will permanently delete the audiobook.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async o=>{if(o.isConfirmed)try{Z().showLoading();const o=await fetch("http://localhost:3000/deleteAudiobook/".concat(e),{method:"DELETE"});if(!o.ok)throw new Error("Failed to delete the book: ".concat(o.statusText));t((t=>t.filter((t=>t._id!==e)))),Z().fire("Deleted!","The audiobook has been deleted.","success"),N()}catch(r){Z().fire("Oops...","Something went wrong while deleting the book!","error")}finally{Z().close(),E()}}))})(e._id),children:"Delete"})]})]},e._id)))})]}),0===e.length&&(0,w.jsx)(i.Z,{variant:"h6",style:{textAlign:"center",padding:"20px",color:"grey"},children:"No data available."})]}),(0,w.jsxs)(p.Z,{open:o,onClose:E,children:[(0,w.jsx)(x.Z,{children:"Edit Audiobook Description"}),(0,w.jsxs)(m.Z,{children:[(0,w.jsx)(g.Z,{children:"Please edit the description of the selected audiobook."}),(0,w.jsx)(j.Z,{autoFocus:!0,margin:"dense",id:"description",label:"Description",type:"text",fullWidth:!0,value:y,onChange:e=>C(e.target.value)})]}),(0,w.jsxs)(f.Z,{children:[(0,w.jsx)(u.Z,{onClick:E,children:"Cancel"}),(0,w.jsx)(u.Z,{onClick:async()=>{try{Z().showLoading();const e=await fetch("http://localhost:3000/updateABD",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:k,description:y})});if(!e.ok)throw new Error("Failed to update the description: ".concat(e.statusText));{const o=await e.json();t((e=>e.map((e=>e._id===k?o:e)))),v(!1),N()}}catch(e){Z().fire("Oops...","Something went wrong while updating the description!","error")}finally{Z().close(),E()}},children:"Save"})]})]})]})}},18914:(e,t,o)=>{o.r(t),o.d(t,{default:()=>y});var r=o(72791),i=o(20890),a=o(39281),n=o(35527),s=o(79836),l=o(56890),c=o(35855),d=o(53994),h=o(53382),u=o(94294),p=o(5289),x=o(10387),m=o(39157),g=o(51691),j=o(40412),f=o(97123),b=o(61567),v=o(21830),Z=o.n(v),w=o(80184);const y=()=>{const[e,t]=(0,r.useState)([]),[o,v]=(0,r.useState)(!1),[y,C]=(0,r.useState)(""),[k,S]=(0,r.useState)([]),[N,E]=(0,r.useState)(null),[P,T]=(0,r.useState)(null),[A,B]=(0,r.useState)(""),[U,L]=(0,r.useState)(!1),[D,F]=(0,r.useState)(""),I=async()=>{const e=b.I8.currentUser;if(e)try{const o=await fetch("http://localhost:3000/getauthorchapter/".concat(e.uid));if(!o.ok){const e=await o.json();throw new Error(e.message||"An error occurred while fetching the chapters.")}const r=await o.json();t(r),C("")}catch(y){console.error("Error fetching text chapters:",y),C(y.toString()),t([])}else C("No user found in auth.")},O=async()=>{const e=b.I8.currentUser;if(e)try{const t=await fetch("http://localhost:3000/getAudioChapters/".concat(e.uid));if(!t.ok){const e=await t.json();throw new Error(e.message||"An error occurred while fetching the audio chapters.")}const o=await t.json();S(o),C("")}catch(y){console.error("Error fetching audio chapters:",y),C(y.toString()),S([])}else C("No user found in auth.")},W=()=>{I(),O()};(0,r.useEffect)((()=>{I(),O()}),[]);const M=()=>{v(!1)},R=async function(o){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Z().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async i=>{if(i.isConfirmed){Z().showLoading();try{const i=r?"http://localhost:3000/deleteaudiochapter/".concat(o):"http://localhost:3000/deletechapter/".concat(o);if(!(await fetch(i,{method:"DELETE"})).ok)throw new Error("Failed to delete the chapter.");W(),r?S(k.filter((e=>e.id!==o))):t(e.filter((e=>e.id!==o))),Z().hideLoading(),Z().fire("Deleted!","Your file has been deleted.","success")}catch(y){Z().hideLoading(),Z().fire("Error!","There was an issue deleting your chapter.","error"),console.error("Error deleting chapter:",y)}}}))};return(0,w.jsxs)("div",{children:[(0,w.jsx)(i.Z,{variant:"h4",component:"h2",children:"My Chapters"}),(0,w.jsx)(a.Z,{component:n.Z,children:(0,w.jsxs)(s.Z,{children:[(0,w.jsx)(l.Z,{children:(0,w.jsxs)(c.Z,{children:[(0,w.jsx)(d.Z,{children:"Book Title"}),(0,w.jsx)(d.Z,{children:"Description"}),(0,w.jsx)(d.Z,{children:"Actions"})]})}),(0,w.jsx)(h.Z,{children:e.map((e=>(0,w.jsxs)(c.Z,{children:[(0,w.jsx)(d.Z,{children:e.title}),(0,w.jsx)(d.Z,{children:e.description}),(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(u.Z,{onClick:()=>((e,t)=>{console.log("Opening chapter for edit:",e),E(e),B(t),v(!0)})(e,e._id),children:"Edit"}),(0,w.jsx)(u.Z,{onClick:()=>R(e._id),children:"Delete"})]})]},e._id)))}),0===e.length&&(0,w.jsx)(i.Z,{variant:"h6",style:{textAlign:"center",padding:"20px",color:"grey"},children:"No data available."})]})}),(0,w.jsx)(i.Z,{variant:"h4",component:"h2",style:{marginTop:"20px"},children:"My Audio Chapters"}),(0,w.jsxs)(a.Z,{component:n.Z,children:[(0,w.jsxs)(s.Z,{children:[(0,w.jsx)(l.Z,{children:(0,w.jsxs)(c.Z,{children:[(0,w.jsx)(d.Z,{children:"Book Title"}),(0,w.jsx)(d.Z,{children:"Duration"}),(0,w.jsx)(d.Z,{children:"Description"}),(0,w.jsx)(d.Z,{children:"Audio File"}),(0,w.jsx)(d.Z,{children:"Actions"})]})}),(0,w.jsx)(h.Z,{children:k.map((e=>(0,w.jsxs)(c.Z,{children:[(0,w.jsx)(d.Z,{children:e.title}),(0,w.jsx)(d.Z,{children:e.duration}),(0,w.jsx)(d.Z,{children:e.description}),(0,w.jsx)(d.Z,{children:(0,w.jsxs)("audio",{controls:!0,onError:e=>console.log("Error playing audio:",e),children:[(0,w.jsx)("source",{src:e.content,type:"audio/mpeg"}),"Your browser does not support the audio element."]})}),(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(u.Z,{onClick:()=>{return t=e,o=e._id,T(t),F(o),void L(!0);var t,o},children:"Edit"}),(0,w.jsx)(u.Z,{onClick:()=>R(e._id,!0),children:"Delete"})]})]},e._id)))})]}),0===k.length&&(0,w.jsx)(i.Z,{variant:"h6",style:{textAlign:"center",padding:"20px",color:"grey"},children:"No audio data available."})]}),(0,w.jsxs)(p.Z,{open:o,onClose:M,children:[(0,w.jsx)(x.Z,{children:"Edit Chapter"}),(0,w.jsxs)(m.Z,{children:[(0,w.jsx)(g.Z,{children:"Please edit the chapter information."}),(0,w.jsx)(j.Z,{margin:"dense",id:"description",label:"Description",type:"text",fullWidth:!0,multiline:!0,rows:10,value:(null===N||void 0===N?void 0:N.description)||"",onChange:e=>{E({...N,description:e.target.value})}})]}),(0,w.jsxs)(f.Z,{children:[(0,w.jsx)(u.Z,{onClick:M,children:"Cancel"}),(0,w.jsx)(u.Z,{onClick:async()=>{Z().fire({title:"Saving chapter...",onBeforeOpen:()=>{Z().showLoading()},allowOutsideClick:()=>!Z().isLoading()});try{if(!(await fetch("http://localhost:3000/updatechapter/".concat(A),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)})).ok)throw new Error("Failed to update the chapter.");v(!1),Z().fire("Success","Chapter updated successfully","success"),W()}catch(y){console.error("Error updating chapter:",y),Z().fire("Error","There was a problem saving the chapter","error")}},children:"Save"})]})]}),(0,w.jsxs)(p.Z,{open:U,onClose:()=>L(!1),children:[(0,w.jsx)(x.Z,{children:"Edit Audio Chapter"}),(0,w.jsx)(m.Z,{children:(0,w.jsx)(j.Z,{margin:"dense",id:"description",label:"Description",multiline:!0,rows:4,type:"text",fullWidth:!0,value:(null===P||void 0===P?void 0:P.description)||"",onChange:e=>((e,t)=>{T({...P,[t]:e.target.value})})(e,"description")})}),(0,w.jsxs)(f.Z,{children:[(0,w.jsx)(u.Z,{onClick:()=>L(!1),children:"Cancel"}),(0,w.jsx)(u.Z,{onClick:async()=>{Z().fire({title:"Saving Audio Chapter...",didOpen:()=>{Z().showLoading()}});try{const e={description:P.description},t=await fetch("http://localhost:3000/updateAudioChapter/".concat(D),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to update the audio chapter.")}L(!1),Z().fire("Success!","Audio chapter updated successfully.","success"),W()}catch(y){Z().fire("Error!","There was an issue saving your audio chapter: ".concat(y.message),"error"),console.error("Error updating audio chapter:",y)}},children:"Save"})]})]})]})}},58522:(e,t,o)=>{o.r(t),o.d(t,{default:()=>y});var r=o(72791),i=o(20890),a=o(39281),n=o(35527),s=o(79836),l=o(56890),c=o(35855),d=o(53994),h=o(53382),u=o(94294),p=o(5289),x=o(10387),m=o(39157),g=o(51691),j=o(40412),f=o(97123),b=o(21830),v=o.n(b),Z=o(61567),w=o(80184);const y=()=>{const[e,t]=(0,r.useState)([]),[o,b]=(0,r.useState)(!1),[y,C]=(0,r.useState)(""),[k,S]=(0,r.useState)(""),N=async()=>{try{v().showLoading();const e=Z.I8.currentUser.uid;console.log("here is the author id"+e);const o=await fetch("http://localhost:3000/getAllBooks/".concat(e)),r=await o.json();t(r),v().close()}catch(e){v().fire({icon:"error",title:"Oops...",text:"Something went wrong while fetching books!"})}};(0,r.useEffect)((()=>{N()}),[]);const E=()=>{b(!1)},P=async e=>{try{v().showLoading();if(200!==(await fetch("http://localhost:3000/deleteBook/".concat(e),{method:"DELETE"})).status)throw new Error("Failed to delete the book.");t((t=>t.filter((t=>t.id!==e)))),v().close()}catch(o){v().fire({icon:"error",title:"Oops...",text:"Something went wrong while deleting the book!"})}};return(0,w.jsxs)("div",{children:[(0,w.jsx)(i.Z,{variant:"h4",component:"h2",children:"My Books"}),(0,w.jsxs)(a.Z,{component:n.Z,children:[(0,w.jsxs)(s.Z,{children:[(0,w.jsx)(l.Z,{children:(0,w.jsxs)(c.Z,{children:[(0,w.jsx)(d.Z,{children:"Title"}),(0,w.jsx)(d.Z,{children:"Subtitle"}),(0,w.jsx)(d.Z,{children:"Description"}),(0,w.jsx)(d.Z,{children:"Publication Date"}),(0,w.jsx)(d.Z,{children:"Actions"})]})}),(0,w.jsx)(h.Z,{children:e.map((e=>(0,w.jsxs)(c.Z,{children:[(0,w.jsx)(d.Z,{children:e.title}),(0,w.jsx)(d.Z,{children:e.subtitle}),(0,w.jsx)(d.Z,{children:e.description}),(0,w.jsx)(d.Z,{children:e.publishedDate}),(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(u.Z,{onClick:()=>{return t=e.description,o=e._id,C(t),S(o),void b(!0);var t,o},children:"Edit"}),(0,w.jsx)(u.Z,{onClick:()=>(e=>{v().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async t=>{t.isConfirmed&&(await P(e._id),N(),v().fire("Deleted!","Your book has been deleted.","success"))}))})(e),children:"Delete"})]})]},e._id)))})]}),0===e.length&&(0,w.jsx)(i.Z,{variant:"h6",style:{textAlign:"center",padding:"20px",color:"grey"},children:"No data available."})]}),(0,w.jsxs)(p.Z,{open:o,onClose:E,children:[(0,w.jsx)(x.Z,{children:"Edit Book Description"}),(0,w.jsxs)(m.Z,{children:[(0,w.jsx)(g.Z,{children:"Please edit the description of the selected book."}),(0,w.jsx)(j.Z,{autoFocus:!0,margin:"dense",id:"description",label:"Description",type:"text",fullWidth:!0,value:y,onChange:e=>C(e.target.value)})]}),(0,w.jsxs)(f.Z,{children:[(0,w.jsx)(u.Z,{onClick:E,children:"Cancel"}),(0,w.jsx)(u.Z,{onClick:async()=>{try{v().showLoading(),console.log("Here is book id "+k);if(200!==(await fetch("http://localhost:3000/updateDescription",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:k,description:y})})).status)throw new Error("Failed to update the description.");t((e=>e.map((e=>e.id===k?{...e,description:y}:e)))),b(!1),v().close()}catch(e){v().fire({icon:"error",title:"Oops...",text:"Something went wrong while updating the description!"})}},children:"Save"})]})]})]})}},34083:(e,t,o)=>{o.d(t,{h:()=>r});const r=["Algeria","Angola","Benin","Botswana","Burkina Faso","Burundi","Cabo Verde","Cameroon","Central African Republic","Chad","Comoros","Democratic Republic of the Congo","Republic of the Congo","Cote d'Ivoire","Djibouti","Egypt","Equatorial Guinea","Eritrea","Eswatini","Ethiopia","Gabon","Gambia","Ghana","Guinea","Guinea-Bissau","Kenya","Lesotho","Liberia","Libya","Madagascar","Malawi","Mali","Mauritania","Mauritius","Morocco","Mozambique","Namibia","Niger","Nigeria","Rwanda","Sao Tome and Principe","Senegal","Seychelles","Sierra Leone","Somalia","South Africa","South Sudan","Sudan","Tanzania","Togo","Tunisia","Uganda","Zambia","Zimbabwe"]},45451:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ne});var r=o(72791),i=o(697),a=o(9953),n=o(34663),s=o(42246),l=o(74752),c=o(36995),d=o(57805),h=o(79912),u=o(74321),p=o(24826),x=o(24917),m=o(46265),g=o(67107),j=o(44507),f=o(84395),b=o(13400),v=o(59402),Z=o(55396),w=o(35527),y=o(53767),C=o(13208),k=o(25028),S=o(23786),N=o(4708),E=o(98008),P=o(45274),T=o(80184);function A(e){const[t,o]=r.useState(!1),a=r.useRef(null),s=e=>{a.current&&a.current.contains(e.target)||o(!1)};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(N.ZP,{}),(0,T.jsx)(f.Z,{position:"fixed",sx:{width:{md:"calc(100% - ".concat(e.drawerWidth,"px)")},ml:{md:"".concat(e.drawerWidth,"px")},bgcolor:"success.main"},children:(0,T.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,T.jsx)(b.Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:e.handleDrawerToggle,sx:{mr:2,display:{md:"none"}},children:(0,T.jsx)(E.Z,{})}),(0,T.jsx)(i.Z,{sx:{flexGrow:1}}),e.width<830?(0,T.jsx)(b.Z,{class:" ml-12 ",size:"large",color:"inherit",ref:a,id:"composition-button","aria-controls":t?"composition-menu":void 0,"aria-expanded":t?"true":void 0,"aria-haspopup":"true",onClick:()=>{o((e=>!e))},children:(0,T.jsx)(v.Z,{sx:{fontSize:30}})}):(0,T.jsx)(P.Z,{}),(0,T.jsx)("div",{children:(0,T.jsx)(Z.Z,{open:t,anchorEl:a.current,role:void 0,placement:"bottom-start",transition:!0,disablePortal:!0,children:e=>{let{TransitionProps:o,placement:r}=e;return(0,T.jsx)(C.Z,{...o,style:{transformOrigin:"bottom-start"===r?"left top":"left bottom"},children:(0,T.jsx)(w.Z,{children:(0,T.jsx)(y.d,{onClickAway:s,children:(0,T.jsxs)(k.Z,{autoFocusItem:t,id:"composition-menu","aria-labelledby":"composition-button",onKeyDown:s,children:[(0,T.jsx)(S.Z,{onClick:s,children:"Home"}),(0,T.jsx)(S.Z,{onClick:s,children:"Premium"}),(0,T.jsx)(S.Z,{onClick:s,children:"Support"}),(0,T.jsx)(S.Z,{onClick:s,children:"Download"})]})})})})}})})]})})]})}var B=o(58522),U=o(18914),L=o(86576),D=o(90493),F=o(66603),I=o(94721),O=o(15021),W=o(76278),M=o(57064),R=o(49900),z=o(40501),q=o(41788),Y=o(11087),_=o(29424),H=o(4853),G=o(93044),K=o(429),J=o(75710),$=o(89013),V=o(12752),X=o(41286),Q=o(19878),ee=o(94796);function te(){return(0,T.jsxs)("div",{children:[(0,T.jsx)(G.Z,{src:"/Y.webp",sx:{width:50,height:50,justifyContent:"center",textAlign:"center",mx:"auto",mt:-5}}),(0,T.jsx)(D.Z,{children:[{name:"Upload Ebook",path:"/dashboard/Upload",icon:(0,T.jsx)($.Z,{})},{name:"Upload Audio",path:"/dashboard/Audio",icon:(0,T.jsx)(F.Z,{})},{name:"Upload Audio Chapter",path:"/dashboard/AudioChapter",icon:(0,T.jsx)(Q.Z,{})},{name:"Write Chapter",path:"/dashboard/Write",icon:(0,T.jsx)(X.Z,{})},{name:"My Audios",path:"/dashboard/MyAudios",icon:(0,T.jsx)(ee.Z,{})},{name:"My Books",path:"/dashboard/MyBooks",icon:(0,T.jsx)(q.Z,{})},{name:"My Chapters",path:"/dashboard/MyChapters",icon:(0,T.jsx)(_.Z,{})},{name:"Statistics",path:"/dashboard/Statistics",icon:(0,T.jsx)(H.Z,{})}].map(((e,t)=>(0,T.jsx)(O.ZP,{disablePadding:!0,children:(0,T.jsx)(Y.rU,{to:e.path,children:(0,T.jsxs)(W.Z,{children:[(0,T.jsx)(M.Z,{children:e.icon}),(0,T.jsx)(R.Z,{primary:e.name})]})})},e.name)))}),(0,T.jsx)(I.Z,{}),(0,T.jsx)(D.Z,{children:[{name:"Profile",path:"/dashboard/Profile",value:"3",icon:(0,T.jsx)(z.Z,{})},{name:"News",path:"/dashboard/News",icon:(0,T.jsx)(J.Z,{})},{name:"NFTs",path:"/dashboard/Nfts",icon:(0,T.jsx)(K.Z,{})},{name:"Support",path:"/dashboard/AuthorSupport",icon:(0,T.jsx)(V.Z,{})}].map(((e,t)=>(0,T.jsx)(O.ZP,{disablePadding:!0,children:(0,T.jsx)(Y.rU,{to:e.path,children:(0,T.jsxs)(W.Z,{children:[(0,T.jsx)(M.Z,{children:e.icon}),(0,T.jsx)(R.Z,{primary:e.name})]})})},e.name)))})]})}var oe=o(59282),re=o(57689);const ie=(0,g.Z)({palette:{background:{paper:"#fff"},text:{primary:"#173A5E",secondary:"#46505A"},action:{active:"#001E3C"},success:{main:"#ffde59"},outline:{main:"#fff"}}}),ae=240;const ne=function(e){const t=(0,oe.Lm)(),{window:o}=e,[g,f]=r.useState(!1),b=()=>{f(!g)},[v,Z]=r.useState(!1),w=r.useRef(null),y=r.useRef(v);r.useEffect((()=>{!0===y.current&&!1===v&&w.current.focus(),y.current=v}),[v]);const C=(0,T.jsxs)("div",{children:[(0,T.jsx)(n.Z,{}),(0,T.jsx)(te,{})]}),k=void 0!==o?()=>o().document.body:void 0;return(0,T.jsx)(j.Z,{theme:ie,children:(0,T.jsxs)(i.Z,{sx:{display:"flex"},children:[(0,T.jsx)(A,{handleDrawerToggle:b,width:t,drawerWidth:ae,handleClose:e=>{w.current&&w.current.contains(e.target)||Z(!1)},handleListKeyDown:function(e){"Tab"===e.key?(e.preventDefault(),Z(!1)):"Escape"===e.key&&Z(!1)},anchorRef:w.current,handleToggle:()=>{Z((e=>!e))},anchorRef1:w}),(0,T.jsxs)(i.Z,{component:"nav",sx:{width:{md:ae},flexShrink:{sm:0}},"aria-label":"mailbox folders",children:[(0,T.jsx)(a.ZP,{container:k,variant:"temporary",open:g,onClose:b,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:ae}},children:C}),(0,T.jsx)(a.ZP,{variant:"permanent",sx:{display:{xs:"none",md:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:ae}},open:!0,children:C})]}),(0,T.jsxs)(i.Z,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - ".concat(ae,"px)")}},children:[(0,T.jsx)(n.Z,{}),(0,T.jsxs)(re.Z5,{children:[(0,T.jsx)(re.AW,{path:"/",index:!0,element:(0,T.jsx)(s.default,{})}),(0,T.jsx)(re.AW,{path:"Upload",element:(0,T.jsx)(l.default,{})}),(0,T.jsx)(re.AW,{path:"Write",element:(0,T.jsx)(h.default,{})}),(0,T.jsx)(re.AW,{path:"Profile",element:(0,T.jsx)(x.default,{})}),(0,T.jsx)(re.AW,{path:"News",index:!0,element:(0,T.jsx)(s.default,{})}),(0,T.jsx)(re.AW,{path:"Audio",index:!0,element:(0,T.jsx)(m.default,{})}),(0,T.jsx)(re.AW,{path:"AudioChapter",element:(0,T.jsx)(u.default,{})}),(0,T.jsx)(re.AW,{path:"Nfts",index:!0,element:(0,T.jsx)(p.default,{})}),(0,T.jsx)(re.AW,{path:"AuthorSupport",index:!0,element:(0,T.jsx)(c.default,{})}),(0,T.jsx)(re.AW,{path:"Statistics",index:!0,element:(0,T.jsx)(d.default,{})}),(0,T.jsx)(re.AW,{path:"Mybooks",index:!0,element:(0,T.jsx)(B.default,{})}),(0,T.jsx)(re.AW,{path:"MyAudios",index:!0,element:(0,T.jsx)(L.default,{})}),(0,T.jsx)(re.AW,{path:"MyChapters",index:!0,element:(0,T.jsx)(U.default,{})})]})]})]})})}},45274:(e,t,o)=>{o.d(t,{Z:()=>s});o(72791);var r=o(36314),i=o(20890),a=o(11087),n=o(80184);const s=function(){return(0,n.jsxs)(r.Z,{spacing:5,direction:"row",className:"hidden lg:flex",sx:{marginLeft:"auto"},children:[(0,n.jsx)(a.rU,{to:"/",className:"no-underline text-white hover:text-yellow-300",children:(0,n.jsx)(i.Z,{variant:"body2",children:"Home"})}),(0,n.jsx)(a.rU,{to:"/Permium",className:"no-underline text-white hover:text-yellow-300",children:(0,n.jsx)(i.Z,{variant:"body2",children:"Permium"})}),(0,n.jsx)(a.rU,{to:"/Support",className:"no-underline text-white hover:text-yellow-300",children:(0,n.jsx)(i.Z,{variant:"body2",children:"Support"})}),(0,n.jsx)(a.rU,{to:"/Download",className:"no-underline text-white hover:text-yellow-300",children:(0,n.jsx)(i.Z,{variant:"body2",children:"Download"})})]})}}}]);
//# sourceMappingURL=5451.117bba91.chunk.js.map