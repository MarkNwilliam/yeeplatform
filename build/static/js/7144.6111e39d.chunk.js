"use strict";(self.webpackChunkyeeplatform=self.webpackChunkyeeplatform||[]).push([[7144,5016,5399],{7144:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});var i=t(65043),o=t(30064),r=t.n(o),s=(t(21785),t(86213)),l=t(5399),n=t(70360),u=t(35016),c=t(70579);function d(){var e,a,t;const{user:o}=(0,i.useContext)(u.AuthContext),[d,p]=(0,i.useState)({}),[h,m]=(0,i.useState)(!1);(0,i.useEffect)((()=>{m(o.providerData&&"google.com"===o.providerData[0].providerId)}),[o]);(0,i.useEffect)((()=>{const e=l.auth.currentUser.uid;s.A.get("https://yeeplatformbackend.azurewebsites.net/userDetails/".concat(e)).then((e=>{const a=e.data;p(a)})).catch((e=>{console.error("Error fetching user data:",e)}))}),[]);return(0,c.jsxs)("div",{className:"p-8 space-y-4",children:[(0,c.jsx)("h1",{className:"text-xl font-semibold",children:"Author Profile"}),(0,c.jsxs)("div",{className:"flex items-center justify-center space-x-4 relative",children:[(0,c.jsx)("img",{alt:"Profile Picture",src:d.profileImage||"https://assets-hfbubwfaacbch3e0.z02.azurefd.net/assets/images/Y.webp",className:"w-32 h-32 rounded-full"}),(0,c.jsx)("input",{type:"file",id:"profilePic",className:"hidden",accept:"image/*",onChange:async e=>{if(0===e.target.files.length)return;r().fire({title:"Uploading...",text:"Your image is being uploaded. Please wait...",allowOutsideClick:!1,didOpen:()=>{r().showLoading()}});const a=new FormData;a.append("image",e.target.files[0]);const t=l.auth.currentUser.uid;try{var i;const e=await s.A.post("https://yeeplatformbackend.azurewebsites.net/userprofilestore/".concat(t),a);if(null===(i=e.data)||void 0===i||!i.imageUrl)throw new Error("Image upload failed");p((a=>({...a,profileImage:e.data.imageUrl}))),r().fire("Success","Image uploaded successfully!","success")}catch(o){r().fire("Oops...","Error uploading the image!","error")}}}),(0,c.jsx)("label",{htmlFor:"profilePic",className:"cursor-pointer absolute bottom-2 right-2 bg-gray-600 bg-opacity-50 rounded-full p-2",children:"\ud83d\udcf7"})]}),(0,c.jsx)("input",{className:"w-full p-2 border rounded-md",type:"text",placeholder:"Name",value:d.username||"",onChange:e=>p((a=>({...a,username:e.target.value})))}),(0,c.jsx)("input",{className:"w-full p-2 border rounded-md",type:"text",placeholder:"Age",value:d.age||"",onChange:e=>p((a=>({...a,age:e.target.value})))}),(0,c.jsx)("textarea",{className:"w-full p-2 border rounded-md",placeholder:"Bio",value:d.bio||"",onChange:e=>p((a=>({...a,bio:e.target.value})))}),(0,c.jsxs)("select",{className:"w-full p-2 border rounded-md",value:d.country||"",onChange:e=>p((a=>({...a,country:e.target.value}))),children:[(0,c.jsx)("option",{value:"",children:"Select a country"}),n.X.map((e=>(0,c.jsx)("option",{value:e,children:e},e)))]}),!h&&(0,c.jsx)("input",{className:"w-full p-2 border rounded-md",type:"text",placeholder:"Email",value:d.email||"",readOnly:!0}),(0,c.jsx)("input",{className:"w-full p-2 border rounded-md",type:"text",placeholder:"Phone",value:d.phone||"",onChange:e=>p((a=>({...a,phone:e.target.value})))}),(0,c.jsx)("input",{className:"w-full p-2 border rounded-md",type:"text",placeholder:"Twitter",value:(null===(e=d.socialLinks)||void 0===e?void 0:e.twitter)||"",onChange:e=>p((a=>({...a,socialLinks:{...a.socialLinks,twitter:e.target.value}})))}),(0,c.jsx)("input",{className:"w-full p-2 border rounded-md",type:"text",placeholder:"Instagram",value:(null===(a=d.socialLinks)||void 0===a?void 0:a.instagram)||"",onChange:e=>p((a=>({...a,socialLinks:{...a.socialLinks,instagram:e.target.value}})))}),(0,c.jsx)("input",{className:"w-full p-2 border rounded-md",type:"text",placeholder:"Facebook",value:(null===(t=d.socialLinks)||void 0===t?void 0:t.facebook)||"",onChange:e=>p((a=>({...a,socialLinks:{...a.socialLinks,facebook:e.target.value}})))}),(0,c.jsx)("input",{className:"w-full p-2 border rounded-md",type:"text",placeholder:"Email",value:d.email||"",readOnly:!0}),(0,c.jsx)("button",{className:"w-full p-2 mt-4 text-white bg-blue-500 rounded-md",onClick:async()=>{r().fire({title:"Updating...",text:"Your profile is being updated. Please wait...",allowOutsideClick:!1,didOpen:()=>{r().showLoading()}});const e=l.auth.currentUser.uid;try{const a=await s.A.put("https://yeeplatformbackend.azurewebsites.net/updateaccountinfo/".concat(e),d);if(!a.data.success||"User data updated successfully"!==a.data.message)throw new Error("Profile update failed");r().fire("Success","Profile updated successfully!","success")}catch(a){r().fire("Oops...","Error updating your profile!","error")}},children:"Update Profile"}),!h&&(0,c.jsx)("button",{className:"w-full p-2 mt-2 text-white bg-yellow-500 rounded-md",onClick:()=>{r().fire("Change Email","Email change functionality will be implemented soon.","info")},children:"Change Email"})]})}},70360:(e,a,t)=>{t.d(a,{X:()=>i});const i=["Algeria","Angola","Benin","Botswana","Burkina Faso","Burundi","Cabo Verde","Cameroon","Central African Republic","Chad","Comoros","Democratic Republic of the Congo","Republic of the Congo","Cote d'Ivoire","Djibouti","Egypt","Equatorial Guinea","Eritrea","Eswatini","Ethiopia","Gabon","Gambia","Ghana","Guinea","Guinea-Bissau","Kenya","Lesotho","Liberia","Libya","Madagascar","Malawi","Mali","Mauritania","Mauritius","Morocco","Mozambique","Namibia","Niger","Nigeria","Rwanda","Sao Tome and Principe","Senegal","Seychelles","Sierra Leone","Somalia","South Africa","South Sudan","Sudan","Tanzania","Togo","Tunisia","Uganda","Zambia","Zimbabwe"]},35016:(e,a,t)=>{t.r(a),t.d(a,{AuthContext:()=>s,AuthProvider:()=>n,default:()=>u,useAuth:()=>l});var i=t(65043),o=t(53536),r=t(70579);const s=(0,i.createContext)();function l(){return i.useContext(s)}function n(e){let{children:a}=e;const[l,n]=(0,i.useState)(!1),[u,c]=(0,i.useState)(null),[d,p]=(0,i.useState)(!0),[h,m]=(0,i.useState)((()=>JSON.parse(localStorage.getItem("isVerified"))||!1)),f=(0,i.useCallback)((0,o.debounce)((async e=>{if(e&&e.uid)try{const a=await fetch("https://yeeplatformbackend.azurewebsites.net/isAuthor/".concat(e.uid));if(a.ok){const e=await a.json();n(e.isAuthor)}}catch(a){}}),15e3),[]),g=(0,i.useCallback)((async(e,a)=>{const{auth:i,signInWithEmailAndPassword:o}=await Promise.all([t.e(2813),t.e(2548),t.e(5399)]).then(t.bind(t,5399));try{var r;const t=await o(i,e,a);c(t.user);const s=(null===(r=t.user)||void 0===r?void 0:r.emailVerified)||!1;m(s),localStorage.setItem("isVerified",s.toString())}catch(s){}}),[]),b=(0,i.useCallback)((async()=>{const{auth:e,signInWithPopup:a,GoogleAuthProvider:i}=await Promise.all([t.e(2813),t.e(2548),t.e(5399)]).then(t.bind(t,5399)),o=new i;try{var r;const t=await a(e,o);c(t.user);const i=(null===(r=t.user)||void 0===r?void 0:r.emailVerified)||!1;m(i),localStorage.setItem("isVerified",i.toString())}catch(s){}}),[]),w=(0,i.useCallback)((async()=>{const{auth:e,signOut:a}=await Promise.all([t.e(2813),t.e(2548),t.e(5399)]).then(t.bind(t,5399));try{await a(e),c(null),n(!1)}catch(i){}}),[]);(0,i.useEffect)((()=>{(async()=>{const{auth:e,onAuthStateChanged:a}=await Promise.all([t.e(2813),t.e(2548),t.e(5399)]).then(t.bind(t,5399)),i=a(e,(async e=>{c(e),p(!1),e&&(m(e.emailVerified),localStorage.setItem("isVerified",e.emailVerified.toString()))}))})()}),[]),(0,i.useEffect)((()=>{u&&f(u)}),[u,f]);const y={user:u,isAuthor:l,loading:d,isVerified:h,login:g,logout:w,loginWithGoogle:b};return(0,r.jsx)(s.Provider,{value:y,children:a})}const u=n},5399:(e,a,t)=>{t.d(a,{$s:()=>o.$s,Cg:()=>c,GoogleAuthProvider:()=>r.HF,auth:()=>n,onAuthStateChanged:()=>r.hg,signInWithEmailAndPassword:()=>r.x9,signInWithPopup:()=>r.df,signOut:()=>r.CI,zS:()=>u});var i=t(37064),o=t(82413),r=t(32813);const s={apiKey:"AIzaSyBXS56tIro9cd-Sd4ySn5AwLw3T6cnMHr0",authDomain:"yeeplatform.firebaseapp.com",projectId:"yeeplatform",storageBucket:"yeeplatform.appspot.com",messagingSenderId:"272587831821",appId:"1:272587831821:web:b612b427ff43968f33f344",measurementId:"G-YZV03469PP"};let l,n,u;(async()=>{if(!l){l=(0,i.Wp)(s),n=(0,r.xI)(l);await(0,o.TT)()&&(u=(0,o.P5)(l))}})();const c=(e,a)=>{u&&(0,o.$s)(u,e,a)}},21785:()=>{}}]);
//# sourceMappingURL=7144.6111e39d.chunk.js.map