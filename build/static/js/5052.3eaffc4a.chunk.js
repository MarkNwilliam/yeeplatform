"use strict";(self.webpackChunkyeeplatform=self.webpackChunkyeeplatform||[]).push([[5052],{46681:(e,t,a)=>{a.d(t,{A:()=>i});var o=a(65043),n=a(71935),r=(a(88331),a(70579));const i=e=>{let{handleNewUserMessage:t}=e;const[a,i]=(0,o.useState)(!0);return(0,r.jsx)(n.Widget,{handleNewUserMessage:t,title:"Ebook Chatbot",subtitle:"Ask me anything about this ebook",profileAvatar:"https://assets-hfbubwfaacbch3e0.z02.azurefd.net/assets/images/Y.webp",emojis:"true",handleToggle:e=>{i((e=>!e))}})}},5399:(e,t,a)=>{a.d(t,{$s:()=>n.$s,CI:()=>r.CI,Cg:()=>c,HF:()=>r.HF,df:()=>r.df,hg:()=>r.hg,j2:()=>l,x9:()=>r.x9,zS:()=>s});var o=a(37064),n=a(82413),r=a(32813);const i=(0,o.Wp)({apiKey:"AIzaSyBXS56tIro9cd-Sd4ySn5AwLw3T6cnMHr0",authDomain:"yeeplatform.firebaseapp.com",projectId:"yeeplatform",storageBucket:"yeeplatform.appspot.com",messagingSenderId:"272587831821",appId:"1:272587831821:web:b612b427ff43968f33f344",measurementId:"G-YZV03469PP"});let s;(0,n.TT)().then((e=>{e&&(s=(0,n.P5)(i))}));const l=(0,r.xI)(i),c=(e,t)=>{s?(0,n.$s)(s,e,t):console.warn("Firebase Analytics is not initialized yet.")}},84847:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var o=a(65043),n=a(50527);const r="#ffde5a";var i=a(73216),s=a(5399),l=a(85369),c=a(11906),u=a(88861),d=a(67254),f=a(46681),g=a(86213),p=a(81929),h=a.n(p),m=a(30064),b=a.n(m),y=a(1043),v=a.n(y),x=a(71935),S=a(70579);function k(e,t,a){const o=e.themes;switch(t){case"dark":o.override("color","#fff"),o.override("background-color","#000"),o.override("font-family",a);break;case"light":o.override("color","#000"),o.override("background","#fff"),o.override("font-family",a)}}const w={...n.Ko,readerArea:{...n.Ko.readerArea,transition:void 0},arrow:{...n.Ko.arrow,color:r},arrowHover:{...n.Ko.arrowHover,color:r},titleArea:{...n.Ko.titleArea,color:"black"},tocArea:{...n.Ko.tocArea,color:r},tocButtonExpanded:{...n.Ko.tocButtonExpanded,color:r},tocButtonBar:{...n.Ko.tocButtonBar,background:"black"},tocButton:{...n.Ko.tocButton,color:r}},C={...n.Ko,arrow:{...n.Ko.arrow,color:"white"},arrowHover:{...n.Ko.arrowHover,color:"yellow"},readerArea:{...n.Ko.readerArea,backgroundColor:"#000",transition:void 0},titleArea:{...n.Ko.titleArea,color:"#ccc"},tocArea:{...n.Ko.tocArea,background:"#111"},tocButtonExpanded:{...n.Ko.tocButtonExpanded,background:"#222"},tocButtonBar:{...n.Ko.tocButtonBar,background:"#fff"},tocButton:{...n.Ko.tocButton,color:"white"}},A=()=>{var e;const[t,a]=(0,o.useState)(""),[p,m]=(0,o.useState)("light"),y=(0,i.Zp)(),A=(0,o.useRef)(void 0),{id:j}=(0,i.g)(),[B,T]=(0,o.useState)(null),[L,R]=(0,o.useState)(!1),[G,I]=(0,o.useState)("en"),[K,M]=(0,o.useState)(localStorage.getItem("font")||"Georgia, serif"),[E,z]=(0,o.useState)(""),[P,H]=(0,o.useState)(null),[_,F]=(0,o.useState)(""),[N,U]=(0,o.useState)([]),[O,V]=(0,o.useState)(0),[$,q]=(0,o.useState)(!1),[D,W]=(0,o.useState)(null),[Z,Q]=(0,o.useState)(null),X=(0,o.useRef)(null),Y=(0,o.useRef)(null),[J,ee]=(0,o.useState)(""),[te,ae]=(0,o.useState)([]),oe=null===(e=s.j2.currentUser)||void 0===e?void 0:e.email;function ne(e){const t=e.start.cfi.split("/"),o=t[0]+"/"+t[1]+"/"+t[2]+"/"+t[3],n=[o,e.start.cfi.replace(o,""),e.end.cfi.replace(o,"")].join(","),r=X.current.getRange(n).toString();a(r)}function re(e,t){const a=X.current.getRange(e).toString();ae(te.concat({text:a,cfiRange:e})),X.current.annotations.add("highlight",e,{},null,"hl",{fill:"red","fill-opacity":"0.5","mix-blend-mode":"multiply"}),t.window.getSelection().removeAllRanges()}(0,o.useEffect)((()=>{if(X.current)return X.current.on("selected",re),X.current.on("relocated",ne),()=>{X.current.off("selected",re)}}),[ae,te]),(0,o.useEffect)((()=>{localStorage.setItem("font",K),A.current&&A.current.themes.override("font-family",K)}),[K]),(0,o.useEffect)((()=>{A.current&&k(A.current,p,K)}),[K]),(0,o.useEffect)((()=>{(async()=>{R(!0);try{const e=await fetch("https://yeeplatformbackend.azurewebsites.net/getEbook/".concat(j)),t=await e.json();T(t)}catch(e){console.error("Error fetching eBook content:",e.message)}finally{R(!1),(0,s.$s)(s.zS,(null===B||void 0===B?void 0:B.title)+"_reader_page_visited")}})()}),[j]),(0,o.useEffect)((()=>{A.current&&k(A.current,p)}),[p]);const[ie,se]=(0,o.useState)(null),le={backgroundColor:r,color:"black",borderRadius:"50%",padding:"10px",fontSize:"20px",position:"absolute",top:"10px",left:"10px"},ce={backgroundColor:r,color:"black",borderRadius:"50%",padding:"10px",fontSize:"20px",margin:"10px"};return(0,o.useEffect)((()=>{(e=>{if(X.current&&Y.current){const{displayed:e,href:t}=X.current.location.start,a=Y.current.find((e=>e.href===t));z("Page ".concat(e.page," of ").concat(e.total," in chapter ").concat(a?a.label:"n/a"))}})()}),[ie]),(0,S.jsxs)("div",{style:{height:"100vh"},children:[(0,S.jsxs)("button",{style:le,onClick:()=>y("/ebooks/".concat(j)),children:[(0,S.jsx)(l.QVr,{})," "]}),(0,S.jsxs)("button",{style:ce,onClick:()=>m("light"),children:[(0,S.jsx)(l.wQq,{})," "]}),(0,S.jsxs)("button",{style:ce,onClick:()=>m("dark"),children:[(0,S.jsx)(l.V6H,{})," "]}),(0,S.jsxs)("button",{style:ce,onClick:async()=>{Q(null);const{value:e}=await b().fire({title:"Select language",html:'\n      <form id="languageForm" style="display: flex; flex-direction: column; align-items: start;">\n          <label><input type="radio" name="language" value="eng"> English</label><br>\n          <label><input type="radio" name="language" value="swh"> Swahili</label><br>\n          <label><input type="radio" name="language" value="spa"> Spanish</label><br>\n          <label><input type="radio" name="language" value="arz"> Arabic</label><br>\n          <label><input type="radio" name="language" value="fra"> French</label><br>\n          \n        </form>\n      ',focusConfirm:!1,preConfirm:()=>{const e=document.getElementById("languageForm").elements.language;let t;for(let a=0;a<e.length;a++)if(e[a].checked){t=e[a].value;break}return t}});if(e){b().fire({title:"Loading...",allowOutsideClick:!1,onBeforeOpen:()=>{b().showLoading()}});let o=B.title.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"");try{const a=(await g.A.post("https://yeeplatform.com/server/synthesize",{text:t,book_title:o,page_number:E,language:e},{timeout:6e6})).data.audio_url;Q("https://yeeplatform.com/server/"+a),b().close()}catch(a){b().fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:"<a href>Why do I have this issue?</a>"}),console.error("Error playing audio:",a)}}},children:[(0,S.jsx)(l.gSK,{})," "]}),(0,S.jsx)("select",{value:K,onChange:e=>M(e.target.value),children:["Georgia, serif","Arial, sans-serif","Courier New, monospace","Times New Roman, Times, serif","Verdana, Geneva, sans-serif","Tahoma, Geneva, sans-serif","Trebuchet MS, Helvetica, sans-serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Lucida Sans Unicode","Lucida Grande, sans-serif","Palatino Linotype, Book Antiqua, Palatino, serif","Garamond, serif","Bookman Old Style, serif","Arial Black, Gadget, sans-serif","Comic Sans MS, cursive, sans-serif","Impact, Charcoal, sans-serif","Gill Sans, sans-serif","Franklin Gothic Medium, Arial, sans-serif","Consolas, monaco, monospace","Courier, monospace","Lucida Console, Monaco, monospace","Lucida Sans Typewriter, Lucida Console, monaco, Bitstream Vera Sans Mono, monospace","American Typewriter, Georgia, serif","Andale Mono, AndaleMono, monospace","Futura, Century Gothic, AppleGothic, sans-serif","Gill Sans, Calibri, Trebuchet MS, sans-serif","Helvetica, Arial, sans-serif","Impact, Haettenschweiler, Franklin Gothic Bold, Charcoal, Helvetica Inserat, sans-serif","Lucida Grande, Lucida Sans, Lucida Sans Unicode, sans-serif","Monaco, Consolas, Lucida Console, monospace","Optima, Segoe, Candara, Calibri, Arial, sans-serif","Palatino, Palatino Linotype, Palatino LT STD, Book Antiqua, Georgia, serif","Tahoma, Verdana, Segoe, sans-serif","TimesNewRoman, Times New Roman, Times, Baskerville, Georgia, serif","Trebuchet MS, Lucida Grande, Lucida Sans Unicode, Lucida Sans, Tahoma, sans-serif","Roboto, sans-serif","Montserrat, sans-serif"].map((e=>(0,S.jsx)("option",{value:e,children:e},e)))}),(0,S.jsx)(u.A,{id:"outlined-basic",label:"Search",variant:"outlined",type:"text",value:_,onChange:e=>{F(e.target.value)},style:{marginTop:"1%",marginRight:"1%"}}),(0,S.jsx)(c.A,{onClick:async()=>{if(A.current&&_){q(!0),W(null);try{const t=await(e=_,Promise.all(A.current.book.spine.spineItems.map((t=>t.load(A.current.book.load.bind(A.current.book)).then(t.find.bind(t,e)).finally(t.unload.bind(t))))).then((e=>(A.current.annotations.remove(),e.forEach((e=>{A.current.annotations.highlight(e.cfi,{},(e=>{}))})),Promise.resolve([].concat.apply([],e))))));U(t)}catch(t){W(t.message)}finally{q(!1)}}var e},variant:"outlined",style:{marginTop:"20px",padding:"10px"},children:"Search"}),(0,S.jsx)("div",{children:$?(0,S.jsx)("p",{children:"Searching..."}):D?(0,S.jsx)(d.A,{severity:"error",children:"Text not found please search for something else."}):N.length>0?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(c.A,{style:{marginRight:"1%"},onClick:()=>{const e=(O-1+N.length)%N.length,t=N[e];A.current.display(t.cfi),A.current.annotations.highlight(t.cfi,{},(e=>{})),V(e)},variant:"outlined",children:"Previous"}),(0,S.jsx)(c.A,{style:{marginRight:"1%"},onClick:()=>{const e=(O+1)%N.length,t=N[e];A.current.display(t.cfi),A.current.annotations.highlight(t.cfi,{},(e=>{})),V(e)},variant:"outlined",children:"Next"})]}):(0,S.jsx)("p",{children:"No results found"})}),Z&&(0,S.jsx)(h(),{children:(0,S.jsxs)("div",{style:{position:"absolute",bottom:"10px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,backgroundColor:"transparent",padding:"10px",borderRadius:"10px",boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.1)"},children:[(0,S.jsx)(v(),{url:Z,controls:!0,playing:!0}),(0,S.jsx)("button",{onClick:()=>Q(null),style:{marginTop:"10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"5px",padding:"5px 10px",cursor:"pointer"},children:"Cancel"})]})}),(0,S.jsx)(n.$W,{title:null===B||void 0===B?void 0:B.title,url:(null===B||void 0===B?void 0:B.ebookepubImagesUrl)||(null===B||void 0===B?void 0:B.ebook_url)||(null===B||void 0===B?void 0:B.ebookUrl),showToc:!0,location:P||ie,locationChanged:e=>se(e),epubInitOptions:{openAs:"epub"},readerStyles:"dark"===p?C:w,getRendition:e=>{k(e,p,K),A.current=e,X.current=e,X.current.themes.default({"::selection":{background:"orange"}}),ae([])},tocChanged:e=>Y.current=e}),(0,S.jsx)(f.A,{handleNewUserMessage:e=>{(0,x.toggleMsgLoader)(),fetch("https://yeeplatform.com/server/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ebook_id:B._id,query:e,user_id:oe||"guest",title:B.title||"test",Description:B.Description||"test"})}).then((e=>e.json())).then((e=>{(0,x.addResponseMessage)(e.response)})).catch((e=>{console.error("Error:",e),(0,x.addResponseMessage)("Sorry, something went wrong.")})).finally((()=>{(0,x.toggleMsgLoader)()}))}})]})}}}]);
//# sourceMappingURL=5052.3eaffc4a.chunk.js.map