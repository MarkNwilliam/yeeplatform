{"version":3,"file":"static/js/5975.bfab661a.chunk.js","mappings":"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","sources":["pages/Audiobooks.js","../node_modules/@mui/icons-material/Refresh.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport ContentCard from \"../subcomponents/ContentCard\";\r\nimport CustomPagination from \"../subcomponents/CustomPagination\";\r\nimport { analytics, logEvent } from '../firebase.js';\r\nimport { Helmet } from 'react-helmet';\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport { useQuery } from 'react-query';\r\nimport RefreshIcon from '@mui/icons-material/Refresh';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\n\r\n\r\nexport default function Audiobooks() {\r\n  const [results, setResults] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(100);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    logEvent(analytics, 'audiobooks_page_visited');\r\n    fetchData();\r\n  }, [currentPage]);\r\n\r\n  const fetchData = async () => {\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const url = searchTerm\r\n        ? `https://yeeplatformbackend.azurewebsites.net/search/audiobooks?title=${searchTerm}&page=${currentPage}&limit=15`\r\n        : `https://yeeplatformbackend.azurewebsites.net/getallaudiobooks?page=${currentPage}&limit=15`;\r\n\r\n      const response = await fetch(url);\r\n      if (!response.ok) throw new Error(`Data fetching failed with status: ${response.status}`);\r\n\r\n      const data = await response.json();\r\n      console.log(\"Response data:\", data); // Log the structure of the data\r\n\r\n      if (data && data.data) {\r\n        if (Array.isArray(data.data)) {\r\n          setResults(data.data);\r\n          setTotalPages(Math.ceil(data.totalItems / 15));\r\n        } else {\r\n          setResults([data.data]); // Wrap the object in an array\r\n          setTotalPages(1); // Update total pages to 1\r\n        }\r\n      } else {\r\n        setResults([]);\r\n        setTotalPages(0);\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n      setError(error);\r\n    }\r\n\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const handlePageChange = (event, value) => {\r\n    setCurrentPage(value);\r\n  };\r\n\r\n  const handleSearchChange = (event) => {\r\n    setSearchTerm(event.target.value);\r\n  };\r\n\r\n  const handleSearchClick = () => {\r\n    setCurrentPage(1)\r\n    console.log('Search Term:', searchTerm);\r\n    fetchData();\r\n  };\r\n\r\n  const handleRefreshClick = () => {\r\n    setCurrentPage(1);\r\n    fetchData();\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center p-4\">\r\n      <Helmet>\r\n        <title>Audiobooks - Yee FM</title>\r\n        <meta name=\"description\" content=\"Search and listen to audiobooks on Yee FM.\" />\r\n        <meta name=\"keywords\" content=\"Yee FM, audiobooks, search, listen, literature, digital library\" />\r\n        <link rel=\"icon\" href=\"https://assets-hfbubwfaacbch3e0.z02.azurefd.net/assets/images/Y.webp\" />\r\n        <meta property=\"og:title\" content=\"Audiobooks - Yee FM\" />\r\n        <meta property=\"og:description\" content=\"Search and listen to audiobooks on Yee FM.\" />\r\n        <meta property=\"og:image\" content=\"https://assets-hfbubwfaacbch3e0.z02.azurefd.net/assets/images/Y.webp\" />\r\n        <meta property=\"og:url\" content=\"https://www.yeefm.com/audiobooks\" />\r\n        <meta property=\"og:type\" content=\"website\" />\r\n      </Helmet>\r\n\r\n      <div className=\"mb-4 flex flex-col items-center\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search for audiobooks...\"\r\n          value={searchTerm}\r\n          onChange={handleSearchChange}\r\n          className=\"p-3 border border-gray-300 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300 transition duration-200 mb-2 sm:mb-0\"\r\n          style={{ width: \"100%\", maxWidth: \"300px\" }}\r\n        />\r\n\r\n        <button\r\n          onClick={handleSearchClick}\r\n          className=\"ml-0 sm:ml-2 p-3 border border-gray-300 rounded-full bg-yellow-500 text-white hover:bg-yellow-600 transition duration-200 focus:outline-none focus:ring-2 focus:ring-yellow-300 flex items-center justify-center\"\r\n          style={{ minWidth: \"100px\" }}\r\n        >\r\n          <SearchIcon /> {/* Search icon */}\r\n        </button>\r\n        </div>\r\n        {error && (\r\n          <button \r\n            onClick={handleRefreshClick}\r\n            className=\"ml-0 sm:ml-2 p-3 border border-gray-300 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition duration-200 focus:outline-none focus:ring-2 focus:ring-blue-300 flex items-center justify-center\"\r\n            style={{ minWidth: \"100px\" }}\r\n          >\r\n            <RefreshIcon /> {/* Refresh icon */}\r\n          </button>\r\n        )}\r\n\r\n      \r\n\r\n      <CustomPagination totalPages={totalPages} currentPage={currentPage} onChange={handlePageChange} />\r\n\r\n      <div className=\"p-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\r\n        {isLoading ? (\r\n         <CircularProgress className=\"text-yellow-500 animate-pulse\" color=\"inherit\" />\r\n        ) : (\r\n          results.map((audiobook, index) => (\r\n            <ContentCard\r\n              key={index}\r\n              title={audiobook.title}\r\n              coverImage={audiobook.thumbnailUrl || audiobook.coverImage || audiobook.coverimage}\r\n              itemType=\"audiobook\"\r\n              itemId={audiobook._id}\r\n              rating={audiobook.rating}\r\n            />\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      <CustomPagination\r\n        totalPages={totalPages}\r\n        currentPage={currentPage}\r\n        onChange={handlePageChange}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z\"\n}), 'Refresh');"],"names":["Audiobooks","results","setResults","useState","currentPage","setCurrentPage","totalPages","setTotalPages","searchTerm","setSearchTerm","isLoading","setIsLoading","error","setError","useEffect","logEvent","analytics","fetchData","async","url","concat","response","fetch","ok","Error","status","data","json","console","log","Array","isArray","Math","ceil","totalItems","handlePageChange","event","value","_jsxs","className","children","Helmet","_jsx","name","content","rel","href","property","type","placeholder","onChange","target","style","width","maxWidth","onClick","handleSearchClick","minWidth","SearchIcon","handleRefreshClick","RefreshIcon","CustomPagination","CircularProgress","color","map","audiobook","index","ContentCard","title","coverImage","thumbnailUrl","coverimage","itemType","itemId","_id","rating","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","default","jsx","d"],"sourceRoot":""}