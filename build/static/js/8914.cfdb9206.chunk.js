"use strict";(self.webpackChunkyeeplatform=self.webpackChunkyeeplatform||[]).push([[8914],{18914:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v});var i=r(72791),o=r(20890),n=r(39281),s=r(35527),c=r(79836),a=r(56890),l=r(35855),d=r(53994),h=r(53382),u=r(94294),p=r(5289),x=r(10387),j=r(39157),Z=r(51691),f=r(40412),g=r(97123),w=r(61567),y=r(21830),C=r.n(y),m=r(80184);const v=()=>{const[e,t]=(0,i.useState)([]),[r,y]=(0,i.useState)(!1),[v,E]=(0,i.useState)(""),[k,S]=(0,i.useState)([]),[A,b]=(0,i.useState)(null),[T,D]=(0,i.useState)(null),[B,L]=(0,i.useState)(""),[N,O]=(0,i.useState)(!1),[_,F]=(0,i.useState)(""),U=async()=>{const e=w.I8.currentUser;if(e)try{const r=await fetch("http://localhost:3000/getauthorchapter/".concat(e.uid));if(!r.ok){const e=await r.json();throw new Error(e.message||"An error occurred while fetching the chapters.")}const i=await r.json();t(i),E("")}catch(v){console.error("Error fetching text chapters:",v),E(v.toString()),t([])}else E("No user found in auth.")},Y=async()=>{const e=w.I8.currentUser;if(e)try{const t=await fetch("http://localhost:3000/getAudioChapters/".concat(e.uid));if(!t.ok){const e=await t.json();throw new Error(e.message||"An error occurred while fetching the audio chapters.")}const r=await t.json();S(r),E("")}catch(v){console.error("Error fetching audio chapters:",v),E(v.toString()),S([])}else E("No user found in auth.")},P=()=>{U(),Y()};(0,i.useEffect)((()=>{U(),Y()}),[]);const I=()=>{y(!1)},J=async function(r){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];C().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async o=>{if(o.isConfirmed){C().showLoading();try{const o=i?"http://localhost:3000/deleteaudiochapter/".concat(r):"http://localhost:3000/deletechapter/".concat(r);if(!(await fetch(o,{method:"DELETE"})).ok)throw new Error("Failed to delete the chapter.");P(),i?S(k.filter((e=>e.id!==r))):t(e.filter((e=>e.id!==r))),C().hideLoading(),C().fire("Deleted!","Your file has been deleted.","success")}catch(v){C().hideLoading(),C().fire("Error!","There was an issue deleting your chapter.","error"),console.error("Error deleting chapter:",v)}}}))};return(0,m.jsxs)("div",{children:[(0,m.jsx)(o.Z,{variant:"h4",component:"h2",children:"My Chapters"}),(0,m.jsx)(n.Z,{component:s.Z,children:(0,m.jsxs)(c.Z,{children:[(0,m.jsx)(a.Z,{children:(0,m.jsxs)(l.Z,{children:[(0,m.jsx)(d.Z,{children:"Book Title"}),(0,m.jsx)(d.Z,{children:"Description"}),(0,m.jsx)(d.Z,{children:"Actions"})]})}),(0,m.jsx)(h.Z,{children:e.map((e=>(0,m.jsxs)(l.Z,{children:[(0,m.jsx)(d.Z,{children:e.title}),(0,m.jsx)(d.Z,{children:e.description}),(0,m.jsxs)(d.Z,{children:[(0,m.jsx)(u.Z,{onClick:()=>((e,t)=>{console.log("Opening chapter for edit:",e),b(e),L(t),y(!0)})(e,e._id),children:"Edit"}),(0,m.jsx)(u.Z,{onClick:()=>J(e._id),children:"Delete"})]})]},e._id)))}),0===e.length&&(0,m.jsx)(o.Z,{variant:"h6",style:{textAlign:"center",padding:"20px",color:"grey"},children:"No data available."})]})}),(0,m.jsx)(o.Z,{variant:"h4",component:"h2",style:{marginTop:"20px"},children:"My Audio Chapters"}),(0,m.jsxs)(n.Z,{component:s.Z,children:[(0,m.jsxs)(c.Z,{children:[(0,m.jsx)(a.Z,{children:(0,m.jsxs)(l.Z,{children:[(0,m.jsx)(d.Z,{children:"Book Title"}),(0,m.jsx)(d.Z,{children:"Duration"}),(0,m.jsx)(d.Z,{children:"Description"}),(0,m.jsx)(d.Z,{children:"Audio File"}),(0,m.jsx)(d.Z,{children:"Actions"})]})}),(0,m.jsx)(h.Z,{children:k.map((e=>(0,m.jsxs)(l.Z,{children:[(0,m.jsx)(d.Z,{children:e.title}),(0,m.jsx)(d.Z,{children:e.duration}),(0,m.jsx)(d.Z,{children:e.description}),(0,m.jsx)(d.Z,{children:(0,m.jsxs)("audio",{controls:!0,onError:e=>console.log("Error playing audio:",e),children:[(0,m.jsx)("source",{src:e.content,type:"audio/mpeg"}),"Your browser does not support the audio element."]})}),(0,m.jsxs)(d.Z,{children:[(0,m.jsx)(u.Z,{onClick:()=>{return t=e,r=e._id,D(t),F(r),void O(!0);var t,r},children:"Edit"}),(0,m.jsx)(u.Z,{onClick:()=>J(e._id,!0),children:"Delete"})]})]},e._id)))})]}),0===k.length&&(0,m.jsx)(o.Z,{variant:"h6",style:{textAlign:"center",padding:"20px",color:"grey"},children:"No audio data available."})]}),(0,m.jsxs)(p.Z,{open:r,onClose:I,children:[(0,m.jsx)(x.Z,{children:"Edit Chapter"}),(0,m.jsxs)(j.Z,{children:[(0,m.jsx)(Z.Z,{children:"Please edit the chapter information."}),(0,m.jsx)(f.Z,{margin:"dense",id:"description",label:"Description",type:"text",fullWidth:!0,multiline:!0,rows:10,value:(null===A||void 0===A?void 0:A.description)||"",onChange:e=>{b({...A,description:e.target.value})}})]}),(0,m.jsxs)(g.Z,{children:[(0,m.jsx)(u.Z,{onClick:I,children:"Cancel"}),(0,m.jsx)(u.Z,{onClick:async()=>{C().fire({title:"Saving chapter...",onBeforeOpen:()=>{C().showLoading()},allowOutsideClick:()=>!C().isLoading()});try{if(!(await fetch("http://localhost:3000/updatechapter/".concat(B),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)})).ok)throw new Error("Failed to update the chapter.");y(!1),C().fire("Success","Chapter updated successfully","success"),P()}catch(v){console.error("Error updating chapter:",v),C().fire("Error","There was a problem saving the chapter","error")}},children:"Save"})]})]}),(0,m.jsxs)(p.Z,{open:N,onClose:()=>O(!1),children:[(0,m.jsx)(x.Z,{children:"Edit Audio Chapter"}),(0,m.jsx)(j.Z,{children:(0,m.jsx)(f.Z,{margin:"dense",id:"description",label:"Description",multiline:!0,rows:4,type:"text",fullWidth:!0,value:(null===T||void 0===T?void 0:T.description)||"",onChange:e=>((e,t)=>{D({...T,[t]:e.target.value})})(e,"description")})}),(0,m.jsxs)(g.Z,{children:[(0,m.jsx)(u.Z,{onClick:()=>O(!1),children:"Cancel"}),(0,m.jsx)(u.Z,{onClick:async()=>{C().fire({title:"Saving Audio Chapter...",didOpen:()=>{C().showLoading()}});try{const e={description:T.description},t=await fetch("http://localhost:3000/updateAudioChapter/".concat(_),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to update the audio chapter.")}O(!1),C().fire("Success!","Audio chapter updated successfully.","success"),P()}catch(v){C().fire("Error!","There was an issue saving your audio chapter: ".concat(v.message),"error"),console.error("Error updating audio chapter:",v)}},children:"Save"})]})]})]})}}}]);
//# sourceMappingURL=8914.cfdb9206.chunk.js.map