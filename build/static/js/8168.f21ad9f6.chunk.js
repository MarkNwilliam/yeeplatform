"use strict";(self.webpackChunkyeeplatform=self.webpackChunkyeeplatform||[]).push([[8168],{38168:(e,t,o)=>{o.r(t),o.d(t,{default:()=>m});var i=o(65043),n=o(85865),s=o(79650),r=o(63336),c=o(71806),a=o(84882),d=o(28076),l=o(10039),h=o(73460),u=o(11906),p=o(90035),x=o(26600),A=o(35316),f=o(98533),j=o(88861),w=o(29347),b=o(2253),k=o(30064),y=o.n(k),g=o(70579);const m=()=>{const[e,t]=(0,i.useState)([]),[o,k]=(0,i.useState)(!1),[m,C]=(0,i.useState)(""),[E,v]=(0,i.useState)(""),T=async()=>{y().showLoading();try{const e=await fetch("https://yeeplatformbackend.azurewebsites.net/getauthoraudios?userId=".concat(b.j2.currentUser.uid));if(!e.ok)throw new Error("Error fetching audiobooks: ".concat(e.statusText));{const o=await e.json();t(o)}}catch(e){console.error("Error fetching audiobooks:",e)}finally{y().close()}};(0,i.useEffect)((()=>{T()}),[]);const D=()=>{k(!1)};return(0,g.jsxs)("div",{children:[(0,g.jsx)(n.A,{variant:"h4",component:"h2",children:"My Audio books"}),(0,g.jsxs)(s.A,{component:r.A,children:[(0,g.jsxs)(c.A,{children:[(0,g.jsx)(a.A,{children:(0,g.jsxs)(d.A,{children:[(0,g.jsx)(l.A,{children:"Title"}),(0,g.jsx)(l.A,{children:"Published On"}),(0,g.jsx)(l.A,{children:"Description"}),(0,g.jsx)(l.A,{children:"Duration"}),(0,g.jsx)(l.A,{children:"Actions"})]})}),(0,g.jsx)(h.A,{children:e.map((e=>(0,g.jsxs)(d.A,{children:[(0,g.jsx)(l.A,{children:e.title}),(0,g.jsx)(l.A,{children:e.publishedDate}),(0,g.jsx)(l.A,{children:e.description}),(0,g.jsx)(l.A,{children:e.duration}),(0,g.jsxs)(l.A,{children:[(0,g.jsx)(u.A,{onClick:()=>{return t=e.description,o=e._id,C(t),v(o),void k(!0);var t,o},children:"Edit"}),(0,g.jsx)(u.A,{onClick:()=>(async e=>{y().fire({title:"Are you sure?",text:"This will permanently delete the audiobook.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async o=>{if(o.isConfirmed)try{y().showLoading();const o=await fetch("https://yeeplatformbackend.azurewebsites.net/deleteAudiobook/".concat(e),{method:"DELETE"});if(!o.ok)throw new Error("Failed to delete the book: ".concat(o.statusText));t((t=>t.filter((t=>t._id!==e)))),y().fire("Deleted!","The audiobook has been deleted.","success"),T()}catch(i){y().fire("Oops...","Something went wrong while deleting the book!","error")}finally{y().close(),D()}}))})(e._id),children:"Delete"})]})]},e._id)))})]}),0===e.length&&(0,g.jsx)(n.A,{variant:"h6",style:{textAlign:"center",padding:"20px",color:"grey"},children:"No data available."})]}),(0,g.jsxs)(p.A,{open:o,onClose:D,children:[(0,g.jsx)(x.A,{children:"Edit Audiobook Description"}),(0,g.jsxs)(A.A,{children:[(0,g.jsx)(f.A,{children:"Please edit the description of the selected audiobook."}),(0,g.jsx)(j.A,{autoFocus:!0,margin:"dense",id:"description",label:"Description",type:"text",fullWidth:!0,value:m,onChange:e=>C(e.target.value)})]}),(0,g.jsxs)(w.A,{children:[(0,g.jsx)(u.A,{onClick:D,children:"Cancel"}),(0,g.jsx)(u.A,{onClick:async()=>{try{y().showLoading();const e=await fetch("https://yeeplatformbackend.azurewebsites.net/updateABD",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:E,description:m})});if(!e.ok)throw new Error("Failed to update the description: ".concat(e.statusText));{const o=await e.json();t((e=>e.map((e=>e._id===E?o:e)))),k(!1),T()}}catch(e){y().fire("Oops...","Something went wrong while updating the description!","error")}finally{y().close(),D()}},children:"Save"})]})]})]})}}}]);
//# sourceMappingURL=8168.f21ad9f6.chunk.js.map