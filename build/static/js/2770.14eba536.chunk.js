"use strict";(self.webpackChunkyeeplatform=self.webpackChunkyeeplatform||[]).push([[2770,5399],{41381:(e,t,o)=>{o.r(t),o.d(t,{default:()=>j});var n=o(65043),r=o(85865),i=o(79650),a=o(63336),s=o(71806),c=o(84882),l=o(28076),d=o(10039),u=o(73460),h=o(11906),p=o(90035),A=o(26600),f=o(35316),m=o(98533),g=o(88861),v=o(29347),x=o(5399),w=o(30064),y=o.n(w),S=o(70579);const j=()=>{const[e,t]=(0,n.useState)([]),[o,w]=(0,n.useState)(!1),[j,C]=(0,n.useState)(""),[b,k]=(0,n.useState)([]),[E,z]=(0,n.useState)(null),[T,D]=(0,n.useState)(null),[N,I]=(0,n.useState)(""),[B,M]=(0,n.useState)(!1),[R,L]=(0,n.useState)(""),P=async()=>{const e=x.auth.currentUser;if(e)try{const o=await fetch("https://yeeplatformbackend.azurewebsites.net/getauthorchapter/".concat(e.uid));if(!o.ok){const e=await o.json();throw new Error(e.message||"An error occurred while fetching the chapters.")}const n=await o.json();t(n),C("")}catch(j){console.error("Error fetching text chapters:",j),C(j.toString()),t([])}else C("No user found in auth.")},O=async()=>{const e=x.auth.currentUser;if(e)try{const t=await fetch("https://yeeplatformbackend.azurewebsites.net/getAudioChapters/".concat(e.uid));if(!t.ok){const e=await t.json();throw new Error(e.message||"An error occurred while fetching the audio chapters.")}const o=await t.json();k(o),C("")}catch(j){console.error("Error fetching audio chapters:",j),C(j.toString()),k([])}else C("No user found in auth.")},V=()=>{P(),O()};(0,n.useEffect)((()=>{P(),O()}),[]);const _=()=>{w(!1)},F=async function(o){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];y().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async r=>{if(r.isConfirmed){y().showLoading();try{const r=n?"https://yeeplatformbackend.azurewebsites.net/deleteaudiochapter/".concat(o):"https://yeeplatformbackend.azurewebsites.net/deletechapter/".concat(o);if(!(await fetch(r,{method:"DELETE"})).ok)throw new Error("Failed to delete the chapter.");V(),n?k(b.filter((e=>e.id!==o))):t(e.filter((e=>e.id!==o))),y().hideLoading(),y().fire("Deleted!","Your file has been deleted.","success")}catch(j){y().hideLoading(),y().fire("Error!","There was an issue deleting your chapter.","error"),console.error("Error deleting chapter:",j)}}}))};return(0,S.jsxs)("div",{children:[(0,S.jsx)(r.A,{variant:"h4",component:"h2",children:"My Chapters"}),(0,S.jsx)(i.A,{component:a.A,children:(0,S.jsxs)(s.A,{children:[(0,S.jsx)(c.A,{children:(0,S.jsxs)(l.A,{children:[(0,S.jsx)(d.A,{children:"Book Title"}),(0,S.jsx)(d.A,{children:"Description"}),(0,S.jsx)(d.A,{children:"Actions"})]})}),(0,S.jsx)(u.A,{children:e.map((e=>(0,S.jsxs)(l.A,{children:[(0,S.jsx)(d.A,{children:e.title}),(0,S.jsx)(d.A,{children:e.description}),(0,S.jsxs)(d.A,{children:[(0,S.jsx)(h.A,{onClick:()=>((e,t)=>{console.log("Opening chapter for edit:",e),z(e),I(t),w(!0)})(e,e._id),children:"Edit"}),(0,S.jsx)(h.A,{onClick:()=>F(e._id),children:"Delete"})]})]},e._id)))}),0===e.length&&(0,S.jsx)(r.A,{variant:"h6",style:{textAlign:"center",padding:"20px",color:"grey"},children:"No data available."})]})}),(0,S.jsx)(r.A,{variant:"h4",component:"h2",style:{marginTop:"20px"},children:"My Audio Chapters"}),(0,S.jsxs)(i.A,{component:a.A,children:[(0,S.jsxs)(s.A,{children:[(0,S.jsx)(c.A,{children:(0,S.jsxs)(l.A,{children:[(0,S.jsx)(d.A,{children:"Book Title"}),(0,S.jsx)(d.A,{children:"Duration"}),(0,S.jsx)(d.A,{children:"Description"}),(0,S.jsx)(d.A,{children:"Audio File"}),(0,S.jsx)(d.A,{children:"Actions"})]})}),(0,S.jsx)(u.A,{children:b.map((e=>(0,S.jsxs)(l.A,{children:[(0,S.jsx)(d.A,{children:e.title}),(0,S.jsx)(d.A,{children:e.duration}),(0,S.jsx)(d.A,{children:e.description}),(0,S.jsx)(d.A,{children:(0,S.jsxs)("audio",{controls:!0,onError:e=>console.log("Error playing audio:",e),children:[(0,S.jsx)("source",{src:e.content,type:"audio/mpeg"}),"Your browser does not support the audio element."]})}),(0,S.jsxs)(d.A,{children:[(0,S.jsx)(h.A,{onClick:()=>{return t=e,o=e._id,D(t),L(o),void M(!0);var t,o},children:"Edit"}),(0,S.jsx)(h.A,{onClick:()=>F(e._id,!0),children:"Delete"})]})]},e._id)))})]}),0===b.length&&(0,S.jsx)(r.A,{variant:"h6",style:{textAlign:"center",padding:"20px",color:"grey"},children:"No audio data available."})]}),(0,S.jsxs)(p.A,{open:o,onClose:_,children:[(0,S.jsx)(A.A,{children:"Edit Chapter"}),(0,S.jsxs)(f.A,{children:[(0,S.jsx)(m.A,{children:"Please edit the chapter information."}),(0,S.jsx)(g.A,{margin:"dense",id:"description",label:"Description",type:"text",fullWidth:!0,multiline:!0,rows:10,value:(null===E||void 0===E?void 0:E.description)||"",onChange:e=>{z({...E,description:e.target.value})}})]}),(0,S.jsxs)(v.A,{children:[(0,S.jsx)(h.A,{onClick:_,children:"Cancel"}),(0,S.jsx)(h.A,{onClick:async()=>{y().fire({title:"Saving chapter...",onBeforeOpen:()=>{y().showLoading()},allowOutsideClick:()=>!y().isLoading()});try{if(!(await fetch("https://yeeplatformbackend.azurewebsites.net/updatechapter/".concat(N),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})).ok)throw new Error("Failed to update the chapter.");w(!1),y().fire("Success","Chapter updated successfully","success"),V()}catch(j){console.error("Error updating chapter:",j),y().fire("Error","There was a problem saving the chapter","error")}},children:"Save"})]})]}),(0,S.jsxs)(p.A,{open:B,onClose:()=>M(!1),children:[(0,S.jsx)(A.A,{children:"Edit Audio Chapter"}),(0,S.jsx)(f.A,{children:(0,S.jsx)(g.A,{margin:"dense",id:"description",label:"Description",multiline:!0,rows:4,type:"text",fullWidth:!0,value:(null===T||void 0===T?void 0:T.description)||"",onChange:e=>((e,t)=>{D({...T,[t]:e.target.value})})(e,"description")})}),(0,S.jsxs)(v.A,{children:[(0,S.jsx)(h.A,{onClick:()=>M(!1),children:"Cancel"}),(0,S.jsx)(h.A,{onClick:async()=>{y().fire({title:"Saving Audio Chapter...",didOpen:()=>{y().showLoading()}});try{const e={description:T.description},t=await fetch("https://yeeplatformbackend.azurewebsites.net/updateAudioChapter/".concat(R),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to update the audio chapter.")}M(!1),y().fire("Success!","Audio chapter updated successfully.","success"),V()}catch(j){y().fire("Error!","There was an issue saving your audio chapter: ".concat(j.message),"error"),console.error("Error updating audio chapter:",j)}},children:"Save"})]})]})]})}},5399:(e,t,o)=>{o.d(t,{$s:()=>r.$s,Cg:()=>d,GoogleAuthProvider:()=>i.HF,auth:()=>c,onAuthStateChanged:()=>i.hg,signInWithEmailAndPassword:()=>i.x9,signInWithPopup:()=>i.df,signOut:()=>i.CI,zS:()=>l});var n=o(37064),r=o(82413),i=o(32813);const a={apiKey:"AIzaSyBXS56tIro9cd-Sd4ySn5AwLw3T6cnMHr0",authDomain:"yeeplatform.firebaseapp.com",projectId:"yeeplatform",storageBucket:"yeeplatform.appspot.com",messagingSenderId:"272587831821",appId:"1:272587831821:web:b612b427ff43968f33f344",measurementId:"G-YZV03469PP"};let s,c,l;(async()=>{if(!s){s=(0,n.Wp)(a),c=(0,i.xI)(s);await(0,r.TT)()&&(l=(0,r.P5)(s))}})();const d=(e,t)=>{l&&(0,r.$s)(l,e,t)}},29347:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(98587),r=o(58168),i=o(65043),a=o(69292),s=o(68606),c=o(34535),l=o(72876),d=o(57056),u=o(32400);function h(e){return(0,u.Ay)("MuiDialogActions",e)}(0,d.A)("MuiDialogActions",["root","spacing"]);var p=o(70579);const A=["className","disableSpacing"],f=(0,c.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,r.A)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),m=i.forwardRef((function(e,t){const o=(0,l.A)({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:c=!1}=o,d=(0,n.A)(o,A),u=(0,r.A)({},o,{disableSpacing:c}),m=(e=>{const{classes:t,disableSpacing:o}=e,n={root:["root",!o&&"spacing"]};return(0,s.A)(n,h,t)})(u);return(0,p.jsx)(f,(0,r.A)({className:(0,a.A)(m.root,i),ownerState:u,ref:t},d))}))},35316:(e,t,o)=>{o.d(t,{A:()=>g});var n=o(98587),r=o(58168),i=o(65043),a=o(69292),s=o(68606),c=o(34535),l=o(72876),d=o(57056),u=o(32400);function h(e){return(0,u.Ay)("MuiDialogContent",e)}(0,d.A)("MuiDialogContent",["root","dividers"]);var p=o(87034),A=o(70579);const f=["className","dividers"],m=(0,c.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.dividers&&t.dividers]}})((e=>{let{theme:t,ownerState:o}=e;return(0,r.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},o.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}:{[".".concat(p.A.root," + &")]:{paddingTop:0}})})),g=i.forwardRef((function(e,t){const o=(0,l.A)({props:e,name:"MuiDialogContent"}),{className:i,dividers:c=!1}=o,d=(0,n.A)(o,f),u=(0,r.A)({},o,{dividers:c}),p=(e=>{const{classes:t,dividers:o}=e,n={root:["root",o&&"dividers"]};return(0,s.A)(n,h,t)})(u);return(0,A.jsx)(m,(0,r.A)({className:(0,a.A)(p.root,i),ownerState:u,ref:t},d))}))},59662:(e,t,o)=>{o.d(t,{A:()=>x});var n=o(58168),r=o(65043),i=o(98587),a=o(69292),s=o(68606),c=o(6803),l=o(72876),d=o(34535),u=o(57056),h=o(32400);function p(e){return(0,h.Ay)("MuiSvgIcon",e)}(0,u.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var A=o(70579);const f=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],m=(0,d.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,"inherit"!==o.color&&t["color".concat((0,c.A)(o.color))],t["fontSize".concat((0,c.A)(o.fontSize))]]}})((e=>{let{theme:t,ownerState:o}=e;var n,r,i,a,s,c,l,d,u,h,p,A,f;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:o.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(n=t.transitions)||null==(r=n.create)?void 0:r.call(n,"fill",{duration:null==(i=t.transitions)||null==(i=i.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(a=t.typography)||null==(s=a.pxToRem)?void 0:s.call(a,20))||"1.25rem",medium:(null==(c=t.typography)||null==(l=c.pxToRem)?void 0:l.call(c,24))||"1.5rem",large:(null==(d=t.typography)||null==(u=d.pxToRem)?void 0:u.call(d,35))||"2.1875rem"}[o.fontSize],color:null!=(h=null==(p=(t.vars||t).palette)||null==(p=p[o.color])?void 0:p.main)?h:{action:null==(A=(t.vars||t).palette)||null==(A=A.action)?void 0:A.active,disabled:null==(f=(t.vars||t).palette)||null==(f=f.action)?void 0:f.disabled,inherit:void 0}[o.color]}})),g=r.forwardRef((function(e,t){const o=(0,l.A)({props:e,name:"MuiSvgIcon"}),{children:d,className:u,color:h="inherit",component:g="svg",fontSize:v="medium",htmlColor:x,inheritViewBox:w=!1,titleAccess:y,viewBox:S="0 0 24 24"}=o,j=(0,i.A)(o,f),C=r.isValidElement(d)&&"svg"===d.type,b=(0,n.A)({},o,{color:h,component:g,fontSize:v,instanceFontSize:e.fontSize,inheritViewBox:w,viewBox:S,hasSvgAsChild:C}),k={};w||(k.viewBox=S);const E=(e=>{const{color:t,fontSize:o,classes:n}=e,r={root:["root","inherit"!==t&&"color".concat((0,c.A)(t)),"fontSize".concat((0,c.A)(o))]};return(0,s.A)(r,p,n)})(b);return(0,A.jsxs)(m,(0,n.A)({as:g,className:(0,a.A)(E.root,u),focusable:"false",color:x,"aria-hidden":!y||void 0,role:y?"img":void 0,ref:t},k,j,C&&d.props,{ownerState:b,children:[C?d.props.children:d,y?(0,A.jsx)("title",{children:y}):null]}))}));g.muiName="SvgIcon";const v=g;function x(e,t){function o(o,r){return(0,A.jsx)(v,(0,n.A)({"data-testid":"".concat(t,"Icon"),ref:r},o,{children:e}))}return o.muiName=v.muiName,r.memo(r.forwardRef(o))}},80950:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(76440).A},90154:(e,t,o)=>{o.d(t,{A:()=>r});var n=o(65043);const r=function(e,t){var o,r;return n.isValidElement(e)&&-1!==t.indexOf(null!=(o=e.type.muiName)?o:null==(r=e.type)||null==(r=r._payload)||null==(r=r.value)?void 0:r.muiName)}},22427:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(22144).A},36078:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(46288).A},54516:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(41944).A},55013:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(63844).A},44708:(e,t,o)=>{function n(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.reduce(((e,t)=>null==t?e:function(){for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];e.apply(this,n),t.apply(this,n)}),(()=>{}))}o.d(t,{A:()=>n})},76440:(e,t,o)=>{function n(e){let t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function n(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];clearTimeout(t),t=setTimeout((()=>{e.apply(this,r)}),o)}return n.clear=()=>{clearTimeout(t)},n}o.d(t,{A:()=>n})},22144:(e,t,o)=>{function n(e){return e&&e.ownerDocument||document}o.d(t,{A:()=>n})},46288:(e,t,o)=>{o.d(t,{A:()=>r});var n=o(22144);function r(e){return(0,n.A)(e).defaultView||window}},41944:(e,t,o)=>{o.d(t,{A:()=>r});var n=o(65043);function r(e){let{controlled:t,default:o,name:r,state:i="value"}=e;const{current:a}=n.useRef(void 0!==t),[s,c]=n.useState(o);return[a?t:s,n.useCallback((e=>{a||c(e)}),[])]}},20992:(e,t,o)=>{var n;o.d(t,{A:()=>s});var r=o(65043);let i=0;const a=(n||(n=o.t(r,2)))["useId".toString()];function s(e){if(void 0!==a){const t=a();return null!=e?e:t}return function(e){const[t,o]=r.useState(e),n=e||t;return r.useEffect((()=>{null==t&&(i+=1,o("mui-".concat(i)))}),[t]),n}(e)}}}]);
//# sourceMappingURL=2770.14eba536.chunk.js.map