"use strict";(self.webpackChunkyeeplatform=self.webpackChunkyeeplatform||[]).push([[4413],{41381:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var o=n(65043),r=n(85865),i=n(79650),a=n(63336),l=n(71806),s=n(84882),c=n(28076),d=n(10039),u=n(73460),h=n(11906),v=n(90035),p=n(26600),f=n(35316),A=n(98533),m=n(88861),g=n(29347),y=n(98225),x=n(30064),w=n.n(x),j=n(70579);const S=()=>{const[e,t]=(0,o.useState)([]),[n,x]=(0,o.useState)(!1),[S,b]=(0,o.useState)(""),[k,C]=(0,o.useState)([]),[E,N]=(0,o.useState)(null),[z,T]=(0,o.useState)(null),[R,B]=(0,o.useState)(""),[M,P]=(0,o.useState)(!1),[D,O]=(0,o.useState)(""),I=async()=>{const e=y.j2.currentUser;if(e)try{const n=await fetch("https://yeeplatformbackend.azurewebsites.net/getauthorchapter/".concat(e.uid));if(!n.ok){const e=await n.json();throw new Error(e.message||"An error occurred while fetching the chapters.")}const o=await n.json();t(o),b("")}catch(S){console.error("Error fetching text chapters:",S),b(S.toString()),t([])}else b("No user found in auth.")},L=async()=>{const e=y.j2.currentUser;if(e)try{const t=await fetch("https://yeeplatformbackend.azurewebsites.net/getAudioChapters/".concat(e.uid));if(!t.ok){const e=await t.json();throw new Error(e.message||"An error occurred while fetching the audio chapters.")}const n=await t.json();C(n),b("")}catch(S){console.error("Error fetching audio chapters:",S),b(S.toString()),C([])}else b("No user found in auth.")},F=()=>{I(),L()};(0,o.useEffect)((()=>{I(),L()}),[]);const _=()=>{x(!1)},q=async function(n){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];w().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async r=>{if(r.isConfirmed){w().showLoading();try{const r=o?"https://yeeplatformbackend.azurewebsites.net/deleteaudiochapter/".concat(n):"https://yeeplatformbackend.azurewebsites.net/deletechapter/".concat(n);if(!(await fetch(r,{method:"DELETE"})).ok)throw new Error("Failed to delete the chapter.");F(),o?C(k.filter((e=>e.id!==n))):t(e.filter((e=>e.id!==n))),w().hideLoading(),w().fire("Deleted!","Your file has been deleted.","success")}catch(S){w().hideLoading(),w().fire("Error!","There was an issue deleting your chapter.","error"),console.error("Error deleting chapter:",S)}}}))};return(0,j.jsxs)("div",{children:[(0,j.jsx)(r.A,{variant:"h4",component:"h2",children:"My Chapters"}),(0,j.jsx)(i.A,{component:a.A,children:(0,j.jsxs)(l.A,{children:[(0,j.jsx)(s.A,{children:(0,j.jsxs)(c.A,{children:[(0,j.jsx)(d.A,{children:"Book Title"}),(0,j.jsx)(d.A,{children:"Description"}),(0,j.jsx)(d.A,{children:"Actions"})]})}),(0,j.jsx)(u.A,{children:e.map((e=>(0,j.jsxs)(c.A,{children:[(0,j.jsx)(d.A,{children:e.title}),(0,j.jsx)(d.A,{children:e.description}),(0,j.jsxs)(d.A,{children:[(0,j.jsx)(h.A,{onClick:()=>((e,t)=>{console.log("Opening chapter for edit:",e),N(e),B(t),x(!0)})(e,e._id),children:"Edit"}),(0,j.jsx)(h.A,{onClick:()=>q(e._id),children:"Delete"})]})]},e._id)))}),0===e.length&&(0,j.jsx)(r.A,{variant:"h6",style:{textAlign:"center",padding:"20px",color:"grey"},children:"No data available."})]})}),(0,j.jsx)(r.A,{variant:"h4",component:"h2",style:{marginTop:"20px"},children:"My Audio Chapters"}),(0,j.jsxs)(i.A,{component:a.A,children:[(0,j.jsxs)(l.A,{children:[(0,j.jsx)(s.A,{children:(0,j.jsxs)(c.A,{children:[(0,j.jsx)(d.A,{children:"Book Title"}),(0,j.jsx)(d.A,{children:"Duration"}),(0,j.jsx)(d.A,{children:"Description"}),(0,j.jsx)(d.A,{children:"Audio File"}),(0,j.jsx)(d.A,{children:"Actions"})]})}),(0,j.jsx)(u.A,{children:k.map((e=>(0,j.jsxs)(c.A,{children:[(0,j.jsx)(d.A,{children:e.title}),(0,j.jsx)(d.A,{children:e.duration}),(0,j.jsx)(d.A,{children:e.description}),(0,j.jsx)(d.A,{children:(0,j.jsxs)("audio",{controls:!0,onError:e=>console.log("Error playing audio:",e),children:[(0,j.jsx)("source",{src:e.content,type:"audio/mpeg"}),"Your browser does not support the audio element."]})}),(0,j.jsxs)(d.A,{children:[(0,j.jsx)(h.A,{onClick:()=>{return t=e,n=e._id,T(t),O(n),void P(!0);var t,n},children:"Edit"}),(0,j.jsx)(h.A,{onClick:()=>q(e._id,!0),children:"Delete"})]})]},e._id)))})]}),0===k.length&&(0,j.jsx)(r.A,{variant:"h6",style:{textAlign:"center",padding:"20px",color:"grey"},children:"No audio data available."})]}),(0,j.jsxs)(v.A,{open:n,onClose:_,children:[(0,j.jsx)(p.A,{children:"Edit Chapter"}),(0,j.jsxs)(f.A,{children:[(0,j.jsx)(A.A,{children:"Please edit the chapter information."}),(0,j.jsx)(m.A,{margin:"dense",id:"description",label:"Description",type:"text",fullWidth:!0,multiline:!0,rows:10,value:(null===E||void 0===E?void 0:E.description)||"",onChange:e=>{N({...E,description:e.target.value})}})]}),(0,j.jsxs)(g.A,{children:[(0,j.jsx)(h.A,{onClick:_,children:"Cancel"}),(0,j.jsx)(h.A,{onClick:async()=>{w().fire({title:"Saving chapter...",onBeforeOpen:()=>{w().showLoading()},allowOutsideClick:()=>!w().isLoading()});try{if(!(await fetch("https://yeeplatformbackend.azurewebsites.net/updatechapter/".concat(R),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})).ok)throw new Error("Failed to update the chapter.");x(!1),w().fire("Success","Chapter updated successfully","success"),F()}catch(S){console.error("Error updating chapter:",S),w().fire("Error","There was a problem saving the chapter","error")}},children:"Save"})]})]}),(0,j.jsxs)(v.A,{open:M,onClose:()=>P(!1),children:[(0,j.jsx)(p.A,{children:"Edit Audio Chapter"}),(0,j.jsx)(f.A,{children:(0,j.jsx)(m.A,{margin:"dense",id:"description",label:"Description",multiline:!0,rows:4,type:"text",fullWidth:!0,value:(null===z||void 0===z?void 0:z.description)||"",onChange:e=>((e,t)=>{T({...z,[t]:e.target.value})})(e,"description")})}),(0,j.jsxs)(g.A,{children:[(0,j.jsx)(h.A,{onClick:()=>P(!1),children:"Cancel"}),(0,j.jsx)(h.A,{onClick:async()=>{w().fire({title:"Saving Audio Chapter...",didOpen:()=>{w().showLoading()}});try{const e={description:z.description},t=await fetch("https://yeeplatformbackend.azurewebsites.net/updateAudioChapter/".concat(D),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to update the audio chapter.")}P(!1),w().fire("Success!","Audio chapter updated successfully.","success"),F()}catch(S){w().fire("Error!","There was an issue saving your audio chapter: ".concat(S.message),"error"),console.error("Error updating audio chapter:",S)}},children:"Save"})]})]})]})}},62205:(e,t,n)=>{n.d(t,{X:()=>i});var o=n(58168),r=n(90540);function i(e,t,n){return void 0===e||(0,r.g)(e)?t:(0,o.A)({},t,{ownerState:(0,o.A)({},t.ownerState,n)})}},29279:(e,t,n)=>{function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n}n.d(t,{h:()=>o})},90540:(e,t,n)=>{function o(e){return"string"===typeof e}n.d(t,{g:()=>o})},49965:(e,t,n)=>{n.d(t,{p:()=>s});var o=n(58168);function r(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=r(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}const i=function(){for(var e,t,n=0,o="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=r(e))&&(o&&(o+=" "),o+=t);return o};var a=n(29279);function l(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t}function s(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:s,className:c}=e;if(!t){const e=i(null==n?void 0:n.className,c,null==s?void 0:s.className,null==r?void 0:r.className),t=(0,o.A)({},null==n?void 0:n.style,null==s?void 0:s.style,null==r?void 0:r.style),a=(0,o.A)({},n,s,r);return e.length>0&&(a.className=e),Object.keys(t).length>0&&(a.style=t),{props:a,internalRef:void 0}}const d=(0,a.h)((0,o.A)({},s,r)),u=l(r),h=l(s),v=t(d),p=i(null==v?void 0:v.className,null==n?void 0:n.className,c,null==s?void 0:s.className,null==r?void 0:r.className),f=(0,o.A)({},null==v?void 0:v.style,null==n?void 0:n.style,null==s?void 0:s.style,null==r?void 0:r.style),A=(0,o.A)({},v,n,h,u);return p.length>0&&(A.className=p),Object.keys(f).length>0&&(A.style=f),{props:A,internalRef:v.ref}}},4430:(e,t,n)=>{function o(e,t,n){return"function"===typeof e?e(t,n):e}n.d(t,{Y:()=>o})},63336:(e,t,n)=>{n.d(t,{A:()=>g});var o=n(98587),r=n(58168),i=n(65043),a=n(69292),l=n(68606),s=n(67266),c=n(34535);const d=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)};var u=n(72876),h=n(57056),v=n(32400);function p(e){return(0,v.Ay)("MuiPaper",e)}(0,h.A)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var f=n(70579);const A=["className","component","elevation","square","variant"],m=(0,c.Ay)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((e=>{let{theme:t,ownerState:n}=e;var o;return(0,r.A)({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((t.vars||t).palette.divider)},"elevation"===n.variant&&(0,r.A)({boxShadow:(t.vars||t).shadows[n.elevation]},!t.vars&&"dark"===t.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,s.X4)("#fff",d(n.elevation)),", ").concat((0,s.X4)("#fff",d(n.elevation)),")")},t.vars&&{backgroundImage:null==(o=t.vars.overlays)?void 0:o[n.elevation]}))})),g=i.forwardRef((function(e,t){const n=(0,u.A)({props:e,name:"MuiPaper"}),{className:i,component:s="div",elevation:c=1,square:d=!1,variant:h="elevation"}=n,v=(0,o.A)(n,A),g=(0,r.A)({},n,{component:s,elevation:c,square:d,variant:h}),y=(e=>{const{square:t,elevation:n,variant:o,classes:r}=e,i={root:["root",o,!t&&"rounded","elevation"===o&&"elevation".concat(n)]};return(0,l.A)(i,p,r)})(g);return(0,f.jsx)(m,(0,r.A)({as:s,ownerState:g,className:(0,a.A)(y.root,i),ref:t},v))}))},59662:(e,t,n)=>{n.d(t,{A:()=>y});var o=n(58168),r=n(65043),i=n(98587),a=n(69292),l=n(68606),s=n(6803),c=n(72876),d=n(34535),u=n(57056),h=n(32400);function v(e){return(0,h.Ay)("MuiSvgIcon",e)}(0,u.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var p=n(70579);const f=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],A=(0,d.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat((0,s.A)(n.color))],t["fontSize".concat((0,s.A)(n.fontSize))]]}})((e=>{let{theme:t,ownerState:n}=e;var o,r,i,a,l,s,c,d,u,h,v,p,f;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(o=t.transitions)||null==(r=o.create)?void 0:r.call(o,"fill",{duration:null==(i=t.transitions)||null==(i=i.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(a=t.typography)||null==(l=a.pxToRem)?void 0:l.call(a,20))||"1.25rem",medium:(null==(s=t.typography)||null==(c=s.pxToRem)?void 0:c.call(s,24))||"1.5rem",large:(null==(d=t.typography)||null==(u=d.pxToRem)?void 0:u.call(d,35))||"2.1875rem"}[n.fontSize],color:null!=(h=null==(v=(t.vars||t).palette)||null==(v=v[n.color])?void 0:v.main)?h:{action:null==(p=(t.vars||t).palette)||null==(p=p.action)?void 0:p.active,disabled:null==(f=(t.vars||t).palette)||null==(f=f.action)?void 0:f.disabled,inherit:void 0}[n.color]}})),m=r.forwardRef((function(e,t){const n=(0,c.A)({props:e,name:"MuiSvgIcon"}),{children:d,className:u,color:h="inherit",component:m="svg",fontSize:g="medium",htmlColor:y,inheritViewBox:x=!1,titleAccess:w,viewBox:j="0 0 24 24"}=n,S=(0,i.A)(n,f),b=r.isValidElement(d)&&"svg"===d.type,k=(0,o.A)({},n,{color:h,component:m,fontSize:g,instanceFontSize:e.fontSize,inheritViewBox:x,viewBox:j,hasSvgAsChild:b}),C={};x||(C.viewBox=j);const E=(e=>{const{color:t,fontSize:n,classes:o}=e,r={root:["root","inherit"!==t&&"color".concat((0,s.A)(t)),"fontSize".concat((0,s.A)(n))]};return(0,l.A)(r,v,o)})(k);return(0,p.jsxs)(A,(0,o.A)({as:m,className:(0,a.A)(E.root,u),focusable:"false",color:y,"aria-hidden":!w||void 0,role:w?"img":void 0,ref:t},C,S,b&&d.props,{ownerState:k,children:[b?d.props.children:d,w?(0,p.jsx)("title",{children:w}):null]}))}));m.muiName="SvgIcon";const g=m;function y(e,t){function n(n,r){return(0,p.jsx)(g,(0,o.A)({"data-testid":"".concat(t,"Icon"),ref:r},n,{children:e}))}return n.muiName=g.muiName,r.memo(r.forwardRef(n))}},80950:(e,t,n)=>{n.d(t,{A:()=>o});const o=n(76440).A},90154:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(65043);const r=function(e,t){var n,r;return o.isValidElement(e)&&-1!==t.indexOf(null!=(n=e.type.muiName)?n:null==(r=e.type)||null==(r=r._payload)||null==(r=r.value)?void 0:r.muiName)}},22427:(e,t,n)=>{n.d(t,{A:()=>o});const o=n(22144).A},36078:(e,t,n)=>{n.d(t,{A:()=>o});const o=n(46288).A},54516:(e,t,n)=>{n.d(t,{A:()=>o});const o=n(41944).A},55013:(e,t,n)=>{n.d(t,{A:()=>o});const o=n(63844).A},44708:(e,t,n)=>{function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e.apply(this,o),t.apply(this,o)}),(()=>{}))}n.d(t,{A:()=>o})},76440:(e,t,n)=>{function o(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function o(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];clearTimeout(t),t=setTimeout((()=>{e.apply(this,r)}),n)}return o.clear=()=>{clearTimeout(t)},o}n.d(t,{A:()=>o})},22144:(e,t,n)=>{function o(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>o})},46288:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(22144);function r(e){return(0,o.A)(e).defaultView||window}},41944:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(65043);function r(e){let{controlled:t,default:n,name:r,state:i="value"}=e;const{current:a}=o.useRef(void 0!==t),[l,s]=o.useState(n);return[a?t:l,o.useCallback((e=>{a||s(e)}),[])]}},20992:(e,t,n)=>{var o;n.d(t,{A:()=>l});var r=n(65043);let i=0;const a=(o||(o=n.t(r,2)))["useId".toString()];function l(e){if(void 0!==a){const t=a();return null!=e?e:t}return function(e){const[t,n]=r.useState(e),o=e||t;return r.useEffect((()=>{null==t&&(i+=1,n("mui-".concat(i)))}),[t]),o}(e)}}}]);
//# sourceMappingURL=4413.6c1f9a49.chunk.js.map