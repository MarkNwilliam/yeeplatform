"use strict";(self.webpackChunkyeeplatform=self.webpackChunkyeeplatform||[]).push([[6576],{86576:(e,t,o)=>{o.r(t),o.d(t,{default:()=>m});var i=o(72791),n=o(20890),s=o(39281),r=o(35527),c=o(79836),a=o(56890),d=o(35855),l=o(53994),h=o(53382),u=o(94294),p=o(5289),x=o(10387),f=o(39157),j=o(51691),Z=o(40412),w=o(97123),b=o(61567),k=o(21830),y=o.n(k),g=o(80184);const m=()=>{const[e,t]=(0,i.useState)([]),[o,k]=(0,i.useState)(!1),[m,C]=(0,i.useState)(""),[E,v]=(0,i.useState)(""),T=async()=>{y().showLoading();try{const e=await fetch("https://yeeplatformbackend.azurewebsites.net/getauthoraudios?userId=".concat(b.I8.currentUser.uid));if(!e.ok)throw new Error("Error fetching audiobooks: ".concat(e.statusText));{const o=await e.json();t(o)}}catch(e){console.error("Error fetching audiobooks:",e)}finally{y().close()}};(0,i.useEffect)((()=>{T()}),[]);const D=()=>{k(!1)};return(0,g.jsxs)("div",{children:[(0,g.jsx)(n.Z,{variant:"h4",component:"h2",children:"My Audio books"}),(0,g.jsxs)(s.Z,{component:r.Z,children:[(0,g.jsxs)(c.Z,{children:[(0,g.jsx)(a.Z,{children:(0,g.jsxs)(d.Z,{children:[(0,g.jsx)(l.Z,{children:"Title"}),(0,g.jsx)(l.Z,{children:"Published On"}),(0,g.jsx)(l.Z,{children:"Description"}),(0,g.jsx)(l.Z,{children:"Duration"}),(0,g.jsx)(l.Z,{children:"Actions"})]})}),(0,g.jsx)(h.Z,{children:e.map((e=>(0,g.jsxs)(d.Z,{children:[(0,g.jsx)(l.Z,{children:e.title}),(0,g.jsx)(l.Z,{children:e.publishedDate}),(0,g.jsx)(l.Z,{children:e.description}),(0,g.jsx)(l.Z,{children:e.duration}),(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(u.Z,{onClick:()=>{return t=e.description,o=e._id,C(t),v(o),void k(!0);var t,o},children:"Edit"}),(0,g.jsx)(u.Z,{onClick:()=>(async e=>{y().fire({title:"Are you sure?",text:"This will permanently delete the audiobook.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async o=>{if(o.isConfirmed)try{y().showLoading();const o=await fetch("https://yeeplatformbackend.azurewebsites.net/deleteAudiobook/".concat(e),{method:"DELETE"});if(!o.ok)throw new Error("Failed to delete the book: ".concat(o.statusText));t((t=>t.filter((t=>t._id!==e)))),y().fire("Deleted!","The audiobook has been deleted.","success"),T()}catch(i){y().fire("Oops...","Something went wrong while deleting the book!","error")}finally{y().close(),D()}}))})(e._id),children:"Delete"})]})]},e._id)))})]}),0===e.length&&(0,g.jsx)(n.Z,{variant:"h6",style:{textAlign:"center",padding:"20px",color:"grey"},children:"No data available."})]}),(0,g.jsxs)(p.Z,{open:o,onClose:D,children:[(0,g.jsx)(x.Z,{children:"Edit Audiobook Description"}),(0,g.jsxs)(f.Z,{children:[(0,g.jsx)(j.Z,{children:"Please edit the description of the selected audiobook."}),(0,g.jsx)(Z.Z,{autoFocus:!0,margin:"dense",id:"description",label:"Description",type:"text",fullWidth:!0,value:m,onChange:e=>C(e.target.value)})]}),(0,g.jsxs)(w.Z,{children:[(0,g.jsx)(u.Z,{onClick:D,children:"Cancel"}),(0,g.jsx)(u.Z,{onClick:async()=>{try{y().showLoading();const e=await fetch("https://yeeplatformbackend.azurewebsites.net/updateABD",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:E,description:m})});if(!e.ok)throw new Error("Failed to update the description: ".concat(e.statusText));{const o=await e.json();t((e=>e.map((e=>e._id===E?o:e)))),k(!1),T()}}catch(e){y().fire("Oops...","Something went wrong while updating the description!","error")}finally{y().close(),D()}},children:"Save"})]})]})]})}}}]);
//# sourceMappingURL=6576.fd4636a8.chunk.js.map