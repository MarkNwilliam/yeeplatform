{"version":3,"file":"static/js/5016.330e33e3.chunk.js","mappings":"2OAWO,MAAMA,GAAcC,EAAAA,EAAAA,iBAEpB,SAASC,IACd,OAAOC,EAAAA,WAAiBH,EAC1B,CAEO,SAASI,EAAYC,GAAgB,IAAf,SAAEC,GAAUD,EACvC,MAAOE,EAAUC,IAAeC,EAAAA,EAAAA,WAAS,IAClCC,EAAMC,IAAWF,EAAAA,EAAAA,UAAS,OAC1BG,EAASC,IAAcJ,EAAAA,EAAAA,WAAS,IAChCK,EAAYC,IAAiBN,EAAAA,EAAAA,WAClC,IAAMO,KAAKC,MAAMC,aAAaC,QAAQ,iBAAkB,IAIpDC,GAAoBC,EAAAA,EAAAA,cAAYC,EAAAA,EAAAA,WAASC,UAC7C,GAAKC,GAAgBA,EAAYC,IAEjC,IACE,MAAMC,QAAiBC,MAAM,yDAADC,OAA0DJ,EAAYC,MAClG,GAAIC,EAASG,GAAI,CACb,MAAMC,QAAaJ,EAASK,OAC5BvB,EAAYsB,EAAKvB,SACrB,CAGF,CAAE,MAAOyB,GACP,IAED,MAAO,IAEJC,GAAQZ,EAAAA,EAAAA,cAAYE,MAAOW,EAAOC,KACtC,IAAK,IAADC,EACF,MAAMC,QAAeC,EAAAA,EAAAA,IAA2BC,EAAAA,GAAML,EAAOC,GAC7DxB,EAAQ0B,EAAO3B,MACf,MAAM8B,GAAsB,QAAXJ,EAAAC,EAAO3B,YAAI,IAAA0B,OAAA,EAAXA,EAAaK,iBAAiB,EAC/C1B,EAAcyB,GACdtB,aAAawB,QAAQ,aAAcF,EAASG,WAC9C,CAAE,MAAOX,GACP,IAED,IAEGY,GAAkBvB,EAAAA,EAAAA,cAAYE,UAClC,MAAMsB,EAAW,IAAIC,EAAAA,GAErB,IAAK,IAADC,EACF,MAAMV,QAAeW,EAAAA,EAAAA,IAAgBT,EAAAA,GAAMM,GAC3ClC,EAAQ0B,EAAO3B,MACf,MAAM8B,GAAsB,QAAXO,EAAAV,EAAO3B,YAAI,IAAAqC,OAAA,EAAXA,EAAaN,iBAAiB,EAC/C1B,EAAcyB,GACdtB,aAAawB,QAAQ,aAAcF,EAASG,WAC9C,CAAE,MAAOX,GACP,IAED,IAEGiB,GAAS5B,EAAAA,EAAAA,cAAYE,UACzB,UACQ2B,EAAAA,EAAAA,IAAQX,EAAAA,IACd5B,EAAQ,MACRH,GAAY,EACd,CAAE,MAAOwB,GACP,IAED,KAGHmB,EAAAA,EAAAA,YAAU,KACR,MAAMC,GAAcC,EAAAA,EAAAA,IAAmBd,EAAAA,IAAMhB,UAC3CZ,EAAQa,GACRX,GAAW,GAEPW,IACFT,EAAcS,EAAYiB,eAC1BvB,aAAawB,QAAQ,aAAclB,EAAYiB,cAAcE,YAC/D,IAGF,MAAO,IAAMS,GAAa,GACzB,KAGHD,EAAAA,EAAAA,YAAU,KACJzC,GACFU,EAAkBV,EACpB,GACC,CAACA,EAAMU,IAGV,MAAMkC,EAAe,CACnB5C,OACAH,WACAK,UACAE,aACAmB,QACAgB,SACAL,mBAGF,OACEW,EAAAA,EAAAA,KAACvD,EAAYwD,SAAQ,CAACC,MAAOH,EAAahD,SACvCA,GAGP,CAEA,S,kKCxGA,MAWMoD,GAAMC,EAAAA,EAAAA,IAXW,CACrBC,OAAQ,0CACRC,WAAY,8BACZC,UAAW,cACXC,cAAe,0BACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAMjB,IAAIC,GAEJC,EAAAA,EAAAA,MAAcC,MAAMD,IACdA,IACFD,GAAYG,EAAAA,EAAAA,IAAaZ,GAGzB,IAOG,MAAMnB,GAAOgC,EAAAA,EAAAA,IAAQb,GAIfc,EAAmBA,CAACC,EAAWC,KACtCP,GACFQ,EAAAA,EAAAA,IAASR,EAAWM,EAAWC,GAE/BE,QAAQC,KAAK,6CACf,C","sources":["contexts/AuthContext.js","firebase.js"],"sourcesContent":["import React, { useState, useEffect, createContext, useCallback } from \"react\";\r\nimport {\r\n  auth,\r\n  onAuthStateChanged,\r\n  signInWithEmailAndPassword,\r\n  GoogleAuthProvider,\r\n  signInWithPopup,\r\n  signOut\r\n} from \"../firebase\";\r\nimport { debounce } from 'lodash'; \r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport function useAuth() {\r\n  return React.useContext(AuthContext);\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [isAuthor, setIsAuthor] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isVerified, setIsVerified] = useState(\r\n    () => JSON.parse(localStorage.getItem('isVerified')) || false\r\n  );\r\n\r\n  // Memoized functions\r\n  const checkAuthorStatus = useCallback(debounce(async (currentUser) => {\r\n    if (!currentUser || !currentUser.uid) return;\r\n\r\n    try {\r\n      const response = await fetch(`https://yeeplatformbackend.azurewebsites.net/isAuthor/${currentUser.uid}`);\r\n      if (response.ok) {\r\n          const data = await response.json();\r\n          setIsAuthor(data.isAuthor);\r\n      } else {\r\n         //console.error(\"AuthContext: Failed to check author status. Response status:\", response.status);\r\n      }\r\n    } catch (error) {\r\n      //console.error(\"AuthContext: Error checking author status:\", error);\r\n    }\r\n  }, 15000),[]);\r\n\r\n  const login = useCallback(async (email, password) => {\r\n    try {\r\n      const result = await signInWithEmailAndPassword(auth, email, password);\r\n      setUser(result.user);\r\n      const verified = result.user?.emailVerified || false;\r\n      setIsVerified(verified);\r\n      localStorage.setItem('isVerified', verified.toString());\r\n    } catch (error) {\r\n      //console.error(\"Error logging in:\", error);\r\n    }\r\n  }, []);\r\n\r\n  const loginWithGoogle = useCallback(async () => {\r\n    const provider = new GoogleAuthProvider();\r\n\r\n    try {\r\n      const result = await signInWithPopup(auth, provider);\r\n      setUser(result.user);\r\n      const verified = result.user?.emailVerified || false;\r\n      setIsVerified(verified);\r\n      localStorage.setItem('isVerified', verified.toString());\r\n    } catch (error) {\r\n      //console.error(\"Error signing in with Google:\", error);\r\n    }\r\n  }, []);\r\n\r\n  const logout = useCallback(async () => {\r\n    try {\r\n      await signOut(auth);\r\n      setUser(null);\r\n      setIsAuthor(false);\r\n    } catch (error) {\r\n      //console.error(\"Error logging out:\", error);\r\n    }\r\n  }, []);\r\n\r\n  // Effect to manage authentication state\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\r\n      setUser(currentUser);\r\n      setLoading(false);\r\n\r\n      if (currentUser) {\r\n        setIsVerified(currentUser.emailVerified);\r\n        localStorage.setItem('isVerified', currentUser.emailVerified.toString());\r\n      }\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  // Effect to check author status after initial render\r\n  useEffect(() => {\r\n    if (user) {\r\n      checkAuthorStatus(user);\r\n    }\r\n  }, [user, checkAuthorStatus]);\r\n\r\n  // Value provided by context\r\n  const contextValue = {\r\n    user,\r\n    isAuthor,\r\n    loading,\r\n    isVerified,\r\n    login,\r\n    logout,\r\n    loginWithGoogle\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={contextValue}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport default AuthProvider;","import { initializeApp } from \"firebase/app\";\r\nimport { getAnalytics,  isSupported, logEvent } from \"firebase/analytics\";\r\nimport {\r\n  getAuth,\r\n  onAuthStateChanged,\r\n  signInWithEmailAndPassword,\r\n  GoogleAuthProvider,\r\n  signInWithPopup,\r\n  sendEmailVerification,\r\n  signOut,\r\n} from \"firebase/auth\";\r\n\r\n\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBXS56tIro9cd-Sd4ySn5AwLw3T6cnMHr0\",\r\n  authDomain: \"yeeplatform.firebaseapp.com\",\r\n  projectId: \"yeeplatform\",\r\n  storageBucket: \"yeeplatform.appspot.com\",\r\n  messagingSenderId: \"272587831821\",\r\n  appId: \"1:272587831821:web:b612b427ff43968f33f344\",\r\n  measurementId: \"G-YZV03469PP\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\nlet analytics;\r\n\r\nisSupported().then((isSupported) => {\r\n  if (isSupported) {\r\n    analytics = getAnalytics(app);\r\n    //console.log(\"Firebase Analytics is supported and loaded successfully!\");\r\n  } else {\r\n    //console.log(\"Firebase Analytics is not supported in this environment\");\r\n  }\r\n});\r\n\r\n// Add console.log statement to check Firebase connection\r\n// console.log(\"Firebase connected successfully\");\r\n\r\nexport const auth = getAuth(app);\r\n\r\n\r\n// Export a function to log events after Firebase Analytics is initialized\r\nexport const logFirebaseEvent = (eventName, eventParams) => {\r\n  if (analytics) {\r\n    logEvent(analytics, eventName, eventParams);\r\n  } else {\r\n    console.warn(\"Firebase Analytics is not initialized yet.\");\r\n  }\r\n};\r\nexport {\r\n  onAuthStateChanged,\r\n  signInWithEmailAndPassword,\r\n  GoogleAuthProvider,\r\n  signInWithPopup,\r\n  sendEmailVerification,\r\n  signOut,\r\n  logEvent,\r\n  analytics,\r\n};"],"names":["AuthContext","createContext","useAuth","React","AuthProvider","_ref","children","isAuthor","setIsAuthor","useState","user","setUser","loading","setLoading","isVerified","setIsVerified","JSON","parse","localStorage","getItem","checkAuthorStatus","useCallback","debounce","async","currentUser","uid","response","fetch","concat","ok","data","json","error","login","email","password","_result$user","result","signInWithEmailAndPassword","auth","verified","emailVerified","setItem","toString","loginWithGoogle","provider","GoogleAuthProvider","_result$user2","signInWithPopup","logout","signOut","useEffect","unsubscribe","onAuthStateChanged","contextValue","_jsx","Provider","value","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","isSupported","then","getAnalytics","getAuth","logFirebaseEvent","eventName","eventParams","logEvent","console","warn"],"sourceRoot":""}